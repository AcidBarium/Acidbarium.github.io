import{_ as g}from"./ValaxyMain.vue_vue_type_style_index_0_lang.IVu3v1-4.js";import{f as y,a as C}from"./chunks/vue-router.DDVc9App.js";import{A as d,N as c,a3 as l,U as h,S as s,R as o,W as i,u as B,O as D}from"./framework.MaWbPGGC.js";import"./app.DIG8ASj4.js";import"./chunks/dayjs.DRNXKsfK.js";import"./chunks/vue-i18n.PIml-ud3.js";import"./chunks/pinia.DQTuBk3f.js";import"./chunks/@vueuse/motion.B_4jFum_.js";import"./chunks/nprogress.Y9-A6VbA.js";import"./YunComment.vue_vue_type_style_index_0_lang.ChocsJ8O.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.C5XaEs4c.js";import"./post.BW3-DAXA.js";const A=y("/posts/llvmEmbedBitcodePass",async k=>JSON.parse('{"title":"EmbedBitcodePass的移植","description":"","frontmatter":{"title":"EmbedBitcodePass的移植","date":"2025-07-02","updated":"2025-10-13","categories":"LLVM","tags":["笔记","pass"]},"headers":[{"level":2,"title":"原版","slug":"原版","link":"#原版","children":[{"level":3,"title":"优化后的ll","slug":"优化后的ll","link":"#优化后的ll","children":[]}]},{"level":2,"title":"移植之后","slug":"移植之后","link":"#移植之后","children":[{"level":3,"title":"优化后的ll","slug":"优化后的ll-1","link":"#优化后的ll-1","children":[]}]}],"relativePath":"pages/posts/llvmEmbedBitcodePass.md","lastUpdated":1761807823000}'),{lazy:(k,e)=>k.name===e.name}),$={__name:"llvmEmbedBitcodePass",setup(k,{expose:e}){var r;const{data:E}=A(),p=C(),t=Object.assign(p.meta.frontmatter||{},((r=E.value)==null?void 0:r.frontmatter)||{});return p.meta.frontmatter=t,d("pageData",E.value),d("valaxy:frontmatter",t),globalThis.$frontmatter=t,e({frontmatter:{title:"EmbedBitcodePass的移植",date:"2025-07-02",updated:"2025-10-13",categories:"LLVM",tags:["笔记","pass"]}}),(n,a)=>{const F=g;return D(),c(F,{frontmatter:B(t)},{"main-content-md":l(()=>[a[0]||(a[0]=s("p",null,'EmbedBitcodePass 是一个 LLVM 中的优化 pass，主要作用是将一个模块的 bitcode 嵌入到另一个模块中，以便在后续的链接或编译过程中，能够携带原始模块的信息。具体来说，它将当前模块的 bitcode 嵌入到一个新的全局变量中，使得这个模块成为一个"自包含"的模块。',-1)),o(" more "),a[1]||(a[1]=s("details",null,[s("summary",null,"llvm17上的源代码"),s("div",{class:"language-cpp vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cpp"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- EmbedBitcodePass.cpp - Pass that embeds the bitcode into a global---===//")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/IPO/EmbedBitcodePass.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Bitcode/BitcodeWriter.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Bitcode/BitcodeWriterPass.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/PassManager.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Pass.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/ErrorHandling.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/MemoryBufferRef.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/raw_ostream.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/TargetParser/Triple.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/IPO/ThinLTOBitcodeWriter.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/Cloning.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/ModuleUtils.h"')]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <memory>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <string>")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," namespace"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," llvm"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PreservedAnalyses"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"M"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ModuleAnalysisManager"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"AM"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (M."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getGlobalVariable"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"llvm.embedded.module"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*AllowInternal=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    report_fatal_error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Can only embed the module once"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                       /*gen_crash_diag=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Triple "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"T"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getTargetTriple"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (T."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getObjectFormat"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Triple"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::ELF)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    report_fatal_error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "EmbedBitcode pass currently only supports ELF object format"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        /*gen_crash_diag=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  std"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::unique_ptr"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NewModule "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CloneModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  MPM."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule, AM);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  std"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::string Data;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  raw_string_ostream "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"OS"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Data);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (IsThinLTO)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    ThinLTOBitcodeWriterPass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(OS,"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*ThinLinkOS=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"nullptr"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule, AM);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  else")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    BitcodeWriterPass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(OS,"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*ShouldPreserveUseListOrder=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", EmitLTOSummary)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule, AM);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  embedBufferInModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M, "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MemoryBufferRef"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Data, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ModuleData"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'".llvm.lto"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PreservedAnalyses"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"all"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})])],-1)),a[2]||(a[2]=s("details",null,[s("summary",null,"移植之后"),s("div",{class:"language-cpp vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cpp"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/ADT/Triple.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Bitcode/BitcodeWriter.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Bitcode/BitcodeWriterPass.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/Constants.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/GlobalVariable.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/LegacyPassManager.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/Module.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/PassManager.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/InitializePasses.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Pass.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/PassRegistry.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/ErrorHandling.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/MemoryBufferRef.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/raw_ostream.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/IPO/PassManagerBuilder.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/Cloning.h"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/ModuleUtils.h"')]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <memory>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <string>")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," namespace"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," llvm"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 新版本LLVM中没有embedBufferInModule函数，提供替代实现")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," embedBufferInModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"M"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," MemoryBufferRef"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"Buffer"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                                const"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Twine"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"SectionName"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 创建全局变量来存储bitcode数据")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Constant "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Data "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ConstantDataArray"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      M."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getContext"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ArrayRef"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint8_t"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"reinterpret_cast<const"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," uint8_t"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                            Buffer."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBufferStart"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                        Buffer."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBufferSize"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()));")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  GlobalVariable "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"GV "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      new"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," GlobalVariable"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M, Data->"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getType"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GlobalValue"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::PrivateLinkage,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                         Data, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"llvm.embedded.module"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  GV->"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setSection"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SectionName."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"str"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// EmbedBitcodePass类定义")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"struct"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodeOptions"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  EmbedBitcodeOptions"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() : "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {}")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  EmbedBitcodeOptions"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(IsThinLTO), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(EmitLTOSummary) {}")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," IsThinLTO;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EmitLTOSummary;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ModulePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," IsThinLTO;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EmitLTOSummary;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Pass "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"MPM;")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  static"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," char"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ID;")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 默认构造函数，用于RegisterPass")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ModulePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ID), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MPM"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"nullptr"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmbedBitcodeOptions"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," Opts"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ModulePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ID), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Opts.IsThinLTO),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Opts.EmitLTOSummary), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MPM"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"nullptr"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {}")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Pass"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"MPM"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," nullptr"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ModulePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ID), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"IsThinLTO"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(IsThinLTO), "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmitLTOSummary"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(EmitLTOSummary),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        MPM"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(MPM) {}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," runOnModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"M"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"override"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  static"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," bool"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," isRequired"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() { "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"return"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 静态ID定义")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"char"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::ID "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Pass实现")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"runOnModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"M"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (M."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getGlobalVariable"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"llvm.embedded.module"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*AllowInternal=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    report_fatal_error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Can only embed the module once"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                       /*gen_crash_diag=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Triple "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"T"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getTargetTriple"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (T."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getObjectFormat"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Triple"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::ELF)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    report_fatal_error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "EmbedBitcode pass currently only supports ELF object format"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        /*gen_crash_diag=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 使用新版本的CloneModule调用")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  std"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::unique_ptr"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Module"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NewModule "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CloneModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (MPM) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 使用legacy PassManager来运行Pass")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    legacy"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::PassManager PM;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    PM."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"add"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(MPM);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    PM."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  std"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::string Data;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  raw_string_ostream "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"OS"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Data);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (IsThinLTO) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 老版本可能没有ThinLTOBitcodeWriterPass，使用普通的BitcodeWriterPass")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    BitcodeWriterPass "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"BitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(OS,"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*ShouldPreserveUseListOrder=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 使用新版本的PassManager API")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ModuleAnalysisManager DummyAM;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    BitcodePass."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule, DummyAM);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 使用新版本的BitcodeWriterPass构造函数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    BitcodeWriterPass "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"BitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(OS,"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /*ShouldPreserveUseListOrder=*/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 使用新版本的PassManager API")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ModuleAnalysisManager DummyAM;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    BitcodePass."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"NewModule, DummyAM);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  embedBufferInModule"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M, "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MemoryBufferRef"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Data, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ModuleData"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'".llvm.lto"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 不修改原始模块")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Pass注册和初始化")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 创建Pass的函数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Pass"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"createEmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 默认参数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 注册Pass")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," RegisterPass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"X"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"embed-bitcode"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'                                        "Embed bitcode into global variable"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                        false"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /* Only looks at CFG */"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                        false"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /* Analysis Pass */"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 注册Pass创建函数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RegisterPass"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    Y"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"embed-bitcode-thinlto"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Embed ThinLTO bitcode into global variable"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"      false"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /* Only looks at CFG */"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," /* Analysis Pass */"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 初始化函数 - 这个函数会被opt自动调用")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"extern"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "C"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LLVMInitializeEmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  RegisterPass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"EmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"X"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'      "embed-bitcode"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Embed bitcode into global variable"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"false"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 注册Pass创建函数 - 使用新的API")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 注意：新版本LLVM的PassRegistry API可能不同，这里简化处理")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 如果使用静态链接，需要这个函数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," registerEmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PassManagerBuilder"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                     legacy"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PassManagerBase"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"PM"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  PM."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"add"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"createEmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 注册到PassManagerBuilder")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RegisterStandardPasses")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    RegisterEmbedBitcodePass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PassManagerBuilder"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::EP_ModuleOptimizerEarly,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                             registerEmbedBitcodePass);")])])]),s("button",{class:"collapse"})])],-1)),a[3]||(a[3]=s("details",null,[s("summary",null,"测试用文件"),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"; ModuleID = 'test.c'")]),i(`
`),s("span",{class:"line"},[s("span",null,'source_filename = "test.c"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target triple = "x86_64-unknown-linux-gnu"')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"; 简单的测试函数")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @main() {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %retval = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 0, i32* %retval, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 42")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"; 另一个测试函数")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @add(i32 %a, i32 %b) {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %a.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %b.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %a, i32* %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %b, i32* %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %0 = load i32, i32* %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %1 = load i32, i32* %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %add = add nsw i32 %0, %1")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 %add")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"; 全局变量测试")]),i(`
`),s("span",{class:"line"},[s("span",null,"@global_var = global i32 100, align 4")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"; 字符串常量")]),i(`
`),s("span",{class:"line"},[s("span",null,'@.str = private unnamed_addr constant [13 x i8] c"Hello World!\\00", align 1')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"; 函数声明")]),i(`
`),s("span",{class:"line"},[s("span",null,"declare i32 @printf(i8*, ...)")])])]),s("button",{class:"collapse"})])],-1)),a[4]||(a[4]=s("h2",{id:"原版",tabindex:"-1"},[i("原版 "),s("a",{class:"header-anchor",href:"#原版","aria-label":'Permalink to "原版"'},"​")],-1)),a[5]||(a[5]=s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"/home/acidcopper/D/vscode/llvm-project/build/bin/opt  -passes=embed-bitcode -S  test.ll -o output2.ll")])])]),s("button",{class:"collapse"})],-1)),a[6]||(a[6]=s("h3",{id:"优化后的ll",tabindex:"-1"},[i("优化后的ll "),s("a",{class:"header-anchor",href:"#优化后的ll","aria-label":'Permalink to "优化后的ll"'},"​")],-1)),a[7]||(a[7]=s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"; ModuleID = 'test.ll'")]),i(`
`),s("span",{class:"line"},[s("span",null,'source_filename = "test.c"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target triple = "x86_64-unknown-linux-gnu"')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"@global_var = global i32 100, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,'@.str = private unnamed_addr constant [13 x i8] c"Hello World!\\00", align 1')]),i(`
`),s("span",{class:"line"},[s("span",null,'@llvm.embedded.object = private constant [2008 x i8] c"BC\\C0\\DE5\\14\\00\\00\\05\\00\\00\\00b\\0C0$LY\\BEf\\BD\\FB\\B4OG\\82\\10\\05\\C8\\14\\00\\00!\\0C\\00\\00\\92\\01\\00\\00\\0B\\02!\\00\\02\\00\\00\\00\\16\\00\\00\\00\\07\\81#\\91A\\C8\\04I\\06\\1029\\92\\01\\84\\0C%\\05\\08\\19\\1E\\04\\8Bb\\80\\10E\\02B\\92\\0BB\\84\\102\\148\\08\\18K\\0A2B\\88Hp\\C4!#D\\12\\87\\8C\\10A\\92\\02d\\C8\\08\\B1\\14 CF\\88 \\C9\\012B\\84\\18*(*\\901|\\B0\\\\\\91 \\C4\\C8\\00\\00\\00\\89 \\00\\00\\0D\\00\\00\\00\\22f\\04\\10\\B2B\\82\\09\\11RB\\82\\09\\91q\\C2PH\\0A\\09&D\\C6\\05BB&\\08\\12\\9A#\\00\\839\\02$\\1B\\A4\\04Q\\86\\88\\A8B\\C0@\\C0\\08\\00\\00\\00\\00\\130|\\C0\\03;\\F8\\05;\\A0\\836\\A8\\07wX\\07wx\\87{p\\876`\\87tp\\87z\\C0\\8768\\07w\\A8\\87\\0D\\A6P\\0Em\\D0\\0EzP\\0Em\\00\\0Frp\\07p\\A0\\07s \\07z0\\07r\\D0\\06\\F0 \\07w\\10\\07z0\\07r\\A0\\07s \\07m\\00\\0Frp\\07r\\A0\\07v@\\07z`\\07t\\D0\\06\\E9`\\07t\\A0\\07v@\\07m`\\0Ex\\00\\07z\\10\\07r\\80\\07m\\E0\\0Ex\\A0\\07q`\\07z0\\07r\\A0\\07v@\\07m0\\0Bq \\07x\\A0\\F4\\80\\10!\\11d\\C8H\\11\\11@#\\84a\\8D\\89\\90&_ \\80B\\82\\01\\DE1)\\C40\\1CI\\00\\00@\\00\\00\\00\\108\\000\\A4r\\08\\02\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\C0\\01\\86T\\D2P\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\008\\C0\\90\\AA2\\0C \\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\07\\90\\D8 P\\D82\\00\\00 \\0B\\04\\00\\00\\08\\00\\00\\002\\1E\\98\\0C\\19\\11L\\90\\8C\\09&G\\C6\\04C\\8AB\\0E\\A0Q\\06Yf\\B3\\DF\\A0\\EB[\\CE&\\87\\00\\B1\\18\\00\\00\\B9\\00\\00\\003\\08\\80\\1C\\C4\\E1\\1Cf\\14\\01=\\88C8\\84\\C3\\8CB\\80\\07yx\\07s\\98q\\0C\\E6\\00\\0F\\ED\\10\\0E\\F4\\80\\0E3\\0CB\\1E\\C2\\C1\\1D\\CE\\A1\\1Cf0\\05=\\88C8\\84\\83\\1B\\CC\\03=\\C8C=\\8C\\03=\\CCx\\8Ctp\\07{\\08\\07yH\\87pp\\07zp\\03vx\\87p \\87\\19\\CC\\11\\0E\\EC\\90\\0E\\E10\\0Fn0\\0F\\E3\\F0\\0E\\F0P\\0E3\\10\\C4\\1D\\DE!\\1C\\D8!\\1D\\C2a\\1Ef0\\89;\\BC\\83;\\D0C9\\B4\\03<\\BC\\83<\\84\\03;\\CC\\F0\\14v`\\07{h\\077h\\87rh\\077\\80\\87p\\90\\87p`\\07v(\\07v\\F8\\05vx\\87w\\80\\87_\\08\\87q\\18\\87r\\98\\87y\\98\\81,\\EE\\F0\\0E\\EE\\E0\\0E\\F5\\C0\\0E\\EC0\\03b\\C8\\A1\\1C\\E4\\A1\\1C\\CC\\A1\\1C\\E4\\A1\\1C\\DCa\\1C\\CA!\\1C\\C4\\81\\1D\\CAa\\06\\D6\\90C9\\C8C9\\98C9\\C8C9\\B8\\C38\\94C8\\88\\03;\\94\\C3/\\BC\\83<\\FC\\82;\\D4\\03;\\B0\\C3\\0C\\C7i\\87pX\\87rp\\83th\\07x`\\87t\\18\\87t\\A0\\87\\19\\CES\\0F\\EE\\00\\0F\\F2P\\0E\\E4\\90\\0E\\E3@\\0F\\E1 \\0E\\ECP\\0E3 (\\1D\\DC\\C1\\1E\\C2A\\1E\\D2!\\1C\\DC\\81\\1E\\DC\\E0\\1C\\E4\\E1\\1D\\EA\\01\\1Ef\\18Q8\\B0C:\\9C\\83;\\CCP$v`\\07{h\\077`\\87wx\\07x\\98QL\\F4\\90\\0F\\F0P\\0E3\\1Ej\\1E\\CAa\\1C\\E8!\\1D\\DE\\C1\\1D~\\01\\1E\\E4\\A1\\1C\\CC!\\1D\\F0a\\06T\\85\\838\\CC\\C3;\\B0C=\\D0C9\\FC\\C2<\\E4C;\\88\\C3;\\B0\\C3\\8C\\C5\\0A\\87y\\98\\87w\\18\\87t\\08\\07z(\\07r\\98\\81\\\\\\E3\\10\\0E\\EC\\C0\\0E\\E5P\\0E\\F30#\\C1\\D2A\\1E\\E4\\E1\\17\\D8\\E1\\1D\\DE\\01\\1EfH\\19;\\B0\\83=\\B4\\83\\1B\\84\\C38\\8CC9\\CC\\C3<\\B8\\C19\\C8\\C3;\\D4\\03<\\CCH\\B4q\\08\\07v`\\07q\\08\\87qX\\87\\19\\DB\\C6\\0E\\EC`\\0F\\ED\\E0\\06\\F0 \\0F\\E50\\0F\\E5 \\0F\\F6P\\0En\\10\\0E\\E30\\0E\\E50\\0F\\F3\\E0\\06\\E9\\E0\\0E\\E4P\\0E\\F80#\\E2\\ECa\\1C\\C2\\81\\1D\\D8\\E1\\17\\EC!\\1D\\E6!\\1D\\C4!\\1D\\D8!\\1D\\E8!\\1Ff \\9D;\\BCC=\\B8\\039\\94\\839\\CCX\\BCpp\\07wx\\07z\\08\\07zH\\87wp\\87\\19\\CB\\E7\\0E\\EF0\\0F\\E1\\E0\\0E\\E9@\\0F\\E9\\A0\\0F\\E50\\C3\\01\\03s\\A8\\07w\\18\\87_\\98\\87pp\\87t\\A0\\87t\\D0\\87r\\98\\81\\84A9\\E0\\C38\\B0C=\\90C9\\CC@\\C4\\A0\\1D\\CA\\A1\\1D\\E0A\\1E\\DE\\C1\\1Cf$c0\\0E\\E1\\C0\\0E\\EC0\\0F\\E9@\\0F\\E50C!\\83u\\18\\07sH\\87_\\A0\\87|\\80\\87r\\98\\B1\\94\\01<\\8C\\C3<\\94\\C38\\D0C:\\BC\\83;\\CC\\C3\\8C\\C5\\0CH!\\15Ba\\1E\\E6!\\1D\\CE\\C1\\1DR\\81\\14\\00\\A9\\18\\00\\00-\\00\\00\\00\\0B\\0Ar(\\87w\\80\\07zXp\\98C=\\B8\\C38\\B0C9\\D0\\C3\\82\\E6\\1C\\C6\\A1\\0D\\E8A\\1E\\C2\\C1\\1D\\E6!\\1D\\E8!\\1D\\DE\\C1\\1D\\164\\E3`\\0E\\E7P\\0F\\E1 \\0F\\E4@\\0F\\E1 \\0F\\E7P\\0E\\F4\\B0\\80\\81\\07y(\\87p`\\07vx\\87q\\08\\07z(\\07rXp\\9C\\C38\\B4\\01;\\A4\\83=\\94\\C3\\02k\\1C\\D8!\\1C\\DC\\E1\\1C\\DC \\1C\\E4a\\1C\\DC \\1C\\E8\\81\\1E\\C2a\\1C\\D0\\A1\\1C\\C8a\\1C\\C2\\81\\1D\\D8a\\C1\\01\\0F\\F4 \\0F\\E1P\\0F\\F4\\80\\0E\\0B\\88u\\18\\07sH\\87\\05\\CF8\\BC\\83;\\D8C9\\C8\\C39\\94\\83;\\8CC9\\8C\\03=\\C8\\03;\\00\\00\\00\\00\\D1\\10\\00\\00\\06\\00\\00\\00\\07\\CC<\\A4\\83;\\9C\\03;\\94\\03=\\A0\\83<\\94C8\\90\\C3\\01\\00\\00\\00a \\00\\00\\0F\\00\\00\\00\\13\\04A,\\10\\00\\00\\00\\02\\00\\00\\00\\14%0\\02PT\\00\\003\\11Ap\\8C\\C2\\B0\\01\\11\\0C\\03\\B0B8\\10\\00\\04\\00\\00\\00\\A6`D\\C4T\\01\\CB\\01\\14D3E\\18\\00\\00\\00\\00\\00\\00\\00a \\00\\00\\17\\00\\00\\00\\13\\04A,\\10\\00\\00\\00\\01\\00\\00\\00\\14%\\00\\003\\11A\\90\\8C\\C2LD\\10$\\A30l@\\08\\C5\\00\\0C\\1B\\10\\011\\00$\\C4 !\\06\\0A\\01\\08l\\10\\0E\\04\\00\\08\\00\\00\\00\\86\\10\\04\\E60\\00\\C3`\\0BF\\E0\\03\\C3\\10\\99\\82\\01\\F8\\C00D\\07P\\10\\CD\\14av\\10\\00\\00\\00\\00\\00\\00\\00q \\00\\00\\03\\00\\00\\002\\0E\\10\\22\\84\\02\\EC\\028\\D0/\\00\\00\\00\\00\\00e\\0C\\00\\007\\00\\00\\00\\12\\03\\94\\B0\\01\\00\\00\\00\\03\\00\\00\\00\\1B\\00\\00\\001\\00\\00\\00L\\00\\00\\00\\01\\00\\00\\00X\\00\\00\\00\\00\\00\\00\\00X\\00\\00\\00\\05\\00\\00\\00\\D0\\00\\00\\00\\00\\00\\00\\00L\\00\\00\\00\\18\\00\\00\\00d\\00\\00\\00\\06\\00\\00\\00\\0E\\00\\00\\00\\00\\00\\00\\00\\D0\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\05\\00\\00\\00\\00\\00\\00\\00\\0E\\00\\00\\00\\04\\00\\00\\00\\0E\\00\\00\\00\\04\\00\\00\\00\\FF\\FF\\FF\\FF\\00$\\00\\00\\12\\00\\00\\00\\03\\00\\00\\00\\12\\00\\00\\00\\03\\00\\00\\00\\FF\\FF\\FF\\FF\\00$\\00\\00\\15\\00\\00\\00\\06\\00\\00\\00\\15\\00\\00\\00\\06\\00\\00\\00\\FF\\FF\\FF\\FF\\08$\\00\\00\\00\\00\\00\\00\\0A\\00\\00\\00\\00\\00\\00\\00\\0A\\00\\00\\00\\FF\\FF\\FF\\FF\\00\\04\\00\\00j\\00\\00\\00\\06\\00\\00\\00\\0A\\00\\00\\00\\04\\00\\00\\00\\FF\\FF\\FF\\FF\\00\\18\\00\\00\\00\\00\\00\\00]\\0C\\00\\00\\1F\\00\\00\\00\\12\\03\\94\\F0\\00\\00\\00\\00global_var.strmainaddprintf17.0.0rc 88bf774c565080e30e0a073676c316ab175303afx86_64-unknown-linux-gnutest.c.L.str\\00\\00\\00\\00", section ".llvm.lto", align 1, !exclude !0')]),i(`
`),s("span",{class:"line"},[s("span",null,'@llvm.compiler.used = appending global [1 x ptr] [ptr @llvm.embedded.object], section "llvm.metadata"')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @main() {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %retval = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 0, ptr %retval, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 42")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @add(i32 %a, i32 %b) {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %a.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %b.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %a, ptr %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %b, ptr %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %0 = load i32, ptr %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %1 = load i32, ptr %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %add = add nsw i32 %0, %1")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 %add")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"declare i32 @printf(ptr, ...)")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"!llvm.embedded.objects = !{!1}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"!0 = !{}")]),i(`
`),s("span",{class:"line"},[s("span",null,'!1 = !{ptr @llvm.embedded.object, !".llvm.lto"}')])])]),s("button",{class:"collapse"})],-1)),a[8]||(a[8]=s("h2",{id:"移植之后",tabindex:"-1"},[i("移植之后 "),s("a",{class:"header-anchor",href:"#移植之后","aria-label":'Permalink to "移植之后"'},"​")],-1)),a[9]||(a[9]=s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"/home/acidcopper/llvm-project/build/bin/opt -load /home/acidcopper/llvm-project/build/lib/EmbedBitcodePass.so -embed-bitcode-thinlto -enable-new-pm=0 -S test.ll -o output.ll")])])]),s("button",{class:"collapse"})],-1)),a[10]||(a[10]=s("h3",{id:"优化后的ll-1",tabindex:"-1"},[i("优化后的ll "),s("a",{class:"header-anchor",href:"#优化后的ll-1","aria-label":'Permalink to "优化后的ll"'},"​")],-1)),a[11]||(a[11]=s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"; ModuleID = 'test.ll'")]),i(`
`),s("span",{class:"line"},[s("span",null,'source_filename = "test.c"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"')]),i(`
`),s("span",{class:"line"},[s("span",null,'target triple = "x86_64-unknown-linux-gnu"')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"@global_var = global i32 100, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,'@.str = private unnamed_addr constant [13 x i8] c"Hello World!\\00", align 1')]),i(`
`),s("span",{class:"line"},[s("span",null,'@llvm.embedded.module = private constant [1832 x i8] c"BC\\C0\\DE5\\14\\00\\00\\05\\00\\00\\00b\\0C0$JY\\BEf}\\FB\\B4O\\0BQ\\80L\\01\\00\\00\\00!\\0C\\00\\00f\\01\\00\\00\\0B\\02!\\00\\02\\00\\00\\00\\16\\00\\00\\00\\07\\81#\\91A\\C8\\04I\\06\\1029\\92\\01\\84\\0C%\\05\\08\\19\\1E\\04\\8Bb\\80\\10E\\02B\\92\\0BB\\84\\102\\148\\08\\18K\\0A2B\\88Hp\\C4!#D\\12\\87\\8C\\10A\\92\\02d\\C8\\08\\B1\\14 CF\\88 \\C9\\012B\\84\\18*(*\\901|\\B0\\\\\\91 \\C4\\C8\\00\\00\\00\\89 \\00\\00\\0F\\00\\00\\002\\22\\08\\09 bF\\00!+$\\98\\10!%$\\98\\10\\19\'\\0C\\85\\A4\\90`Bd\\\\ $d\\82\\C0\\99#\\00\\03\\829\\02D\\1B\\84\\C6\\04@e\\06\\00\\A0#\\B1\\02$\\E9@\\C0\\08\\00\\00\\130|\\C0\\03;\\F8\\05;\\A0\\836\\A8\\07wX\\07wx\\87{p\\876`\\87tp\\87z\\C0\\8768\\07w\\A8\\87\\0D\\A6P\\0Em\\D0\\0EzP\\0Em\\00\\0Frp\\07p\\A0\\07s \\07z0\\07r\\D0\\06\\F0 \\07w\\10\\07z0\\07r\\A0\\07s \\07m\\00\\0Frp\\07r\\A0\\07v@\\07z`\\07t\\D0\\06\\E9`\\07t\\A0\\07v@\\07m`\\0Ex\\00\\07z\\10\\07r\\80\\07m\\E0\\0Ex\\A0\\07q`\\07z0\\07r\\A0\\07v@\\07m0\\0Bq \\07x\\A0\\F4\\80\\10!\\11d\\C8H\\11\\11@#\\84a\\8D\\89\\90&_ \\80\\02\\82\\01\\DE!)\\C40\\1CI\\00\\00@\\00\\00\\00\\108\\C0\\90\\CA!\\0A\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\07\\18RI\\C3\\01\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\E0\\00C\\AA\\CAP\\80\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\1C@b\\83@a\\B5\\00\\00\\80,\\10\\00\\00\\00\\08\\00\\00\\002\\1E\\98\\0C\\19\\11L\\90\\8C\\09&G\\C6\\04C\\82B\\0E\\A0Q\\06Yf\\B3\\DF\\A0\\EB[\\CE&\\87\\00\\B1\\18\\00\\00\\97\\00\\00\\003\\08\\80\\1C\\C4\\E1\\1Cf\\14\\01=\\88C8\\84\\C3\\8CB\\80\\07yx\\07s\\98q\\0C\\E6\\00\\0F\\ED\\10\\0E\\F4\\80\\0E3\\0CB\\1E\\C2\\C1\\1D\\CE\\A1\\1Cf0\\05=\\88C8\\84\\83\\1B\\CC\\03=\\C8C=\\8C\\03=\\CCx\\8Ctp\\07{\\08\\07yH\\87pp\\07zp\\03vx\\87p \\87\\19\\CC\\11\\0E\\EC\\90\\0E\\E10\\0Fn0\\0F\\E3\\F0\\0E\\F0P\\0E3\\10\\C4\\1D\\DE!\\1C\\D8!\\1D\\C2a\\1Ef0\\89;\\BC\\83;\\D0C9\\B4\\03<\\BC\\83<\\84\\03;\\CC\\F0\\14v`\\07{h\\077h\\87rh\\077\\80\\87p\\90\\87p`\\07v(\\07v\\F8\\05vx\\87w\\80\\87_\\08\\87q\\18\\87r\\98\\87y\\98\\81,\\EE\\F0\\0E\\EE\\E0\\0E\\F5\\C0\\0E\\EC0\\03b\\C8\\A1\\1C\\E4\\A1\\1C\\CC\\A1\\1C\\E4\\A1\\1C\\DCa\\1C\\CA!\\1C\\C4\\81\\1D\\CAa\\06\\D6\\90C9\\C8C9\\98C9\\C8C9\\B8\\C38\\94C8\\88\\03;\\94\\C3/\\BC\\83<\\FC\\82;\\D4\\03;\\B0\\C3\\0C\\C7i\\87pX\\87rp\\83th\\07x`\\87t\\18\\87t\\A0\\87\\19\\CES\\0F\\EE\\00\\0F\\F2P\\0E\\E4\\90\\0E\\E3@\\0F\\E1 \\0E\\ECP\\0E3 (\\1D\\DC\\C1\\1E\\C2A\\1E\\D2!\\1C\\DC\\81\\1E\\DC\\E0\\1C\\E4\\E1\\1D\\EA\\01\\1Ef\\18Q8\\B0C:\\9C\\83;\\CCP$v`\\07{h\\077`\\87wx\\07x\\98QL\\F4\\90\\0F\\F0P\\0E3\\1Ej\\1E\\CAa\\1C\\E8!\\1D\\DE\\C1\\1D~\\01\\1E\\E4\\A1\\1C\\CC!\\1D\\F0a\\06T\\85\\838\\CC\\C3;\\B0C=\\D0C9\\FC\\C2<\\E4C;\\88\\C3;\\B0\\C3\\8C\\C5\\0A\\87y\\98\\87w\\18\\87t\\08\\07z(\\07r\\98\\81\\\\\\E3\\10\\0E\\EC\\C0\\0E\\E5P\\0E\\F30#\\C1\\D2A\\1E\\E4\\E1\\17\\D8\\E1\\1D\\DE\\01\\1EfH\\19;\\B0\\83=\\B4\\83\\1B\\84\\C38\\8CC9\\CC\\C3<\\B8\\C19\\C8\\C3;\\D4\\03<\\CCH\\B4q\\08\\07v`\\07q\\08\\87qX\\87\\19\\DB\\C6\\0E\\EC`\\0F\\ED\\E0\\06\\F0 \\0F\\E50\\0F\\E5 \\0F\\F6P\\0En\\10\\0E\\E30\\0E\\E50\\0F\\F3\\E0\\06\\E9\\E0\\0E\\E4P\\0E\\F80#\\E2\\ECa\\1C\\C2\\81\\1D\\D8\\E1\\17\\EC!\\1D\\E6!\\1D\\C4!\\1D\\D8!\\1D\\E8!\\1Ff \\9D;\\BCC=\\B8\\039\\94\\839\\CCX\\BCpp\\07wx\\07z\\08\\07zH\\87wp\\07\\00\\00\\A9\\18\\00\\00!\\00\\00\\00\\0B\\0Ar(\\87w\\80\\07zXp\\98C=\\B8\\C38\\B0C9\\D0\\C3\\82\\E6\\1C\\C6\\A1\\0D\\E8A\\1E\\C2\\C1\\1D\\E6!\\1D\\E8!\\1D\\DE\\C1\\1D\\164\\E3`\\0E\\E7P\\0F\\E1 \\0F\\E4@\\0F\\E1 \\0F\\E7P\\0E\\F4\\B0\\80\\81\\07y(\\87p`\\07vx\\87q\\08\\07z(\\07rXp\\9C\\C38\\B4\\01;\\A4\\83=\\94\\C3\\02k\\1C\\D8!\\1C\\DC\\E1\\1C\\DC \\1C\\E4a\\1C\\DC \\1C\\E8\\81\\1E\\C2a\\1C\\D0\\A1\\1C\\C8a\\1C\\C2\\81\\1D\\D8\\01\\D1\\10\\00\\00\\06\\00\\00\\00\\07\\CC<\\A4\\83;\\9C\\03;\\94\\03=\\A0\\83<\\94C8\\90\\C3\\01\\00\\00\\00a \\00\\00\\0F\\00\\00\\00\\13\\04A,\\10\\00\\00\\00\\02\\00\\00\\00\\04%0\\02PT\\00\\003\\11\\00p\\8C\\C2\\B0\\01\\11\\0C\\03\\B0B8\\10\\00\\04\\00\\00\\00\\07P\\10\\CD\\14a\\A6`D\\C4T\\01\\0B\\00\\00\\00\\00\\00\\00\\00a \\00\\00\\17\\00\\00\\00\\13\\04A,\\10\\00\\00\\00\\01\\00\\00\\00\\04%\\00\\003\\11\\00\\90\\8C\\C2L\\04\\00$\\A30l@\\08\\C5\\00\\0C\\1B\\10\\011\\00$\\C0 \\01\\06\\0A\\01\\08l\\10\\0E\\04\\00\\08\\00\\00\\00v\\10\\00\\86\\10\\04\\07P\\10\\CD\\14a\\E60\\00\\C3`\\0A\\06\\E0\\03\\C3\\10\\D9\\82\\11\\F8\\C00D\\00\\00\\00\\00\\00\\00q \\00\\00\\03\\00\\00\\002\\0E\\10\\22\\84\\02\\C0\\028\\10-\\00\\00\\00\\00\\00e\\0C\\00\\007\\00\\00\\00\\12\\03\\94\\B0\\01\\00\\00\\00\\03\\00\\00\\00\\1B\\00\\00\\00/\\00\\00\\00L\\00\\00\\00\\01\\00\\00\\00X\\00\\00\\00\\00\\00\\00\\00X\\00\\00\\00\\05\\00\\00\\00\\D0\\00\\00\\00\\00\\00\\00\\00J\\00\\00\\00\\18\\00\\00\\00b\\00\\00\\00\\06\\00\\00\\00\\0E\\00\\00\\00\\00\\00\\00\\00\\D0\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\00\\05\\00\\00\\00\\00\\00\\00\\00\\0E\\00\\00\\00\\04\\00\\00\\00\\0E\\00\\00\\00\\04\\00\\00\\00\\FF\\FF\\FF\\FF\\00$\\00\\00\\12\\00\\00\\00\\03\\00\\00\\00\\12\\00\\00\\00\\03\\00\\00\\00\\FF\\FF\\FF\\FF\\00$\\00\\00\\15\\00\\00\\00\\06\\00\\00\\00\\15\\00\\00\\00\\06\\00\\00\\00\\FF\\FF\\FF\\FF\\08$\\00\\00\\00\\00\\00\\00\\0A\\00\\00\\00\\00\\00\\00\\00\\0A\\00\\00\\00\\FF\\FF\\FF\\FF\\00\\04\\00\\00h\\00\\00\\00\\06\\00\\00\\00\\0A\\00\\00\\00\\04\\00\\00\\00\\FF\\FF\\FF\\FF\\00\\18\\00\\00\\00\\00\\00\\00]\\0C\\00\\00\\1F\\00\\00\\00\\12\\03\\94\\EE\\00\\00\\00\\00global_var.strmainaddprintf13.0.0 d7b669b3a30345cfcdb2fde2af6f48aa4b94845dx86_64-unknown-linux-gnutest.c.L.str\\00\\00\\00\\00\\00\\00", section ".llvm.lto"')]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @main() {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %retval = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 0, i32* %retval, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 42")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"define i32 @add(i32 %a, i32 %b) {")]),i(`
`),s("span",{class:"line"},[s("span",null,"entry:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %a.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %b.addr = alloca i32, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %a, i32* %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  store i32 %b, i32* %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %0 = load i32, i32* %a.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %1 = load i32, i32* %b.addr, align 4")]),i(`
`),s("span",{class:"line"},[s("span",null,"  %add = add nsw i32 %0, %1")]),i(`
`),s("span",{class:"line"},[s("span",null,"  ret i32 %add")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"declare i32 @printf(i8*, ...)")])])]),s("button",{class:"collapse"})],-1)),a[12]||(a[12]=s("p",null,"在第一段代码中，声明了一个名为 @llvm.embedded.module 的私有常量，而在第二段代码中，声明的是 @llvm.embedded.object 全局变量，并且第二段代码中还有 @llvm.compiler.used 全局变量，它是用于将某些全局变量标记为被编译器使用，防止链接器优化掉这些变量。 两段代码中嵌入式模块或对象的二进制数据在长度和具体内容上可能有差异（如第一段是 [1832 x i8]，第二段是 [2008 x i8]），这些数据可能是在编译过程中的不同阶段生成的，用于不同的编译器内部处理或优化目的。但由于这些数据在运行时可能并不直接影响函数逻辑，所以对运行效果的影响不大。",-1))]),"main-header":l(()=>[h(n.$slots,"main-header")]),"main-header-after":l(()=>[h(n.$slots,"main-header-after")]),"main-nav":l(()=>[h(n.$slots,"main-nav")]),"main-content-before":l(()=>[h(n.$slots,"main-content-before")]),"main-content":l(()=>[h(n.$slots,"main-content")]),"main-content-after":l(()=>[h(n.$slots,"main-content-after")]),"main-nav-before":l(()=>[h(n.$slots,"main-nav-before")]),"main-nav-after":l(()=>[h(n.$slots,"main-nav-after")]),comment:l(()=>[h(n.$slots,"comment")]),footer:l(()=>[h(n.$slots,"footer")]),aside:l(()=>[h(n.$slots,"aside")]),"aside-custom":l(()=>[h(n.$slots,"aside-custom")]),default:l(()=>[h(n.$slots,"default")]),_:3},8,["frontmatter"])}}};export{$ as default,A as usePageData};
