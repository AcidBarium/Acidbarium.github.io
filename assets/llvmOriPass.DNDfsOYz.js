import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.B33wPh_m.js";import{f as E,a as y}from"./chunks/vue-router.BLK4Byhi.js";import{A as o,N as u,a3 as l,U as n,S as i,W as s,u as A,O as F}from"./framework.BOFoIXwn.js";import"./app.CNZpHuZ_.js";import"./chunks/dayjs.DRNXKsfK.js";import"./chunks/vue-i18n.DF1tl79Z.js";import"./chunks/pinia.CvQUKRCU.js";import"./chunks/@vueuse/motion.D-_3lofP.js";import"./chunks/nprogress.Y9-A6VbA.js";import"./YunComment.vue_vue_type_style_index_0_lang.Dl7DO3ne.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DD-n1N2V.js";import"./post.YwAyf2y7.js";const D=E("/posts/llvmOriPass",async e=>JSON.parse('{"title":"LLVMå¸¸è§Pass","description":"","frontmatter":{"title":"LLVMå¸¸è§Pass","date":"2025-06-22","updated":"2025-10-13","categories":"LLVM","tags":["ç¬”è®°","pass"]},"headers":[{"level":2,"title":"Pass æ³¨å†Œå’Œè°ƒç”¨","slug":"pass-æ³¨å†Œå’Œè°ƒç”¨","link":"#pass-æ³¨å†Œå’Œè°ƒç”¨","children":[{"level":3,"title":"Mem2Reg.cpp","slug":"mem2reg-cpp","link":"#mem2reg-cpp","children":[]},{"level":3,"title":"åŠŸèƒ½æ€»ç»“ä¸€å¥ï¼š","slug":"åŠŸèƒ½æ€»ç»“ä¸€å¥","link":"#åŠŸèƒ½æ€»ç»“ä¸€å¥","children":[]}]},{"level":2,"title":"é€æ®µè§£è¯»","slug":"é€æ®µè§£è¯»","link":"#é€æ®µè§£è¯»","children":[{"level":3,"title":"1. å¯¼å…¥å¤´æ–‡ä»¶","slug":"_1-å¯¼å…¥å¤´æ–‡ä»¶","link":"#_1-å¯¼å…¥å¤´æ–‡ä»¶","children":[]},{"level":3,"title":"2. promoteMemoryToRegister() å‡½æ•°","slug":"_2-promotememorytoregister-å‡½æ•°","link":"#_2-promotememorytoregister-å‡½æ•°","children":[]},{"level":3,"title":"GVN.cpp","slug":"gvn-cpp","link":"#gvn-cpp","children":[]}]},{"level":2,"title":"åŸè‹±æ–‡æ³¨é‡Š","slug":"åŸè‹±æ–‡æ³¨é‡Š","link":"#åŸè‹±æ–‡æ³¨é‡Š","children":[]},{"level":2,"title":"ä¸­æ–‡ç¿»è¯‘ + é€å¥è§£è¯»","slug":"ä¸­æ–‡ç¿»è¯‘-é€å¥è§£è¯»","link":"#ä¸­æ–‡ç¿»è¯‘-é€å¥è§£è¯»","children":[{"level":3,"title":"è¿™ä¸ª Pass å®ç°äº†ï¼š","slug":"è¿™ä¸ª-pass-å®ç°äº†","link":"#è¿™ä¸ª-pass-å®ç°äº†","children":[]},{"level":3,"title":"æ³¨æ„ï¼š","slug":"æ³¨æ„","link":"#æ³¨æ„","children":[]},{"level":3,"title":"ä¼˜åŒ–å‰ï¼š","slug":"ä¼˜åŒ–å‰","link":"#ä¼˜åŒ–å‰","children":[]},{"level":3,"title":"GVN ä¼˜åŒ–åï¼š","slug":"gvn-ä¼˜åŒ–å","link":"#gvn-ä¼˜åŒ–å","children":[]},{"level":3,"title":"DCE.cpp","slug":"dce-cpp","link":"#dce-cpp","children":[]},{"level":3,"title":"ADCE.cpp","slug":"adce-cpp","link":"#adce-cpp","children":[]},{"level":3,"title":"LICM.cpp","slug":"licm-cpp","link":"#licm-cpp","children":[]},{"level":3,"title":"è¿™ä¸ª Pass å®ç°äº†ï¼š","slug":"è¿™ä¸ª-pass-å®ç°äº†-1","link":"#è¿™ä¸ª-pass-å®ç°äº†-1","children":[]},{"level":3,"title":"å®ƒåšä»€ä¹ˆï¼Ÿ","slug":"å®ƒåšä»€ä¹ˆ","link":"#å®ƒåšä»€ä¹ˆ","children":[]},{"level":3,"title":"è¿˜èƒ½åšï¼š","slug":"è¿˜èƒ½åš","link":"#è¿˜èƒ½åš","children":[]},{"level":3,"title":"ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ","slug":"ä¸ºä»€ä¹ˆé‡è¦","link":"#ä¸ºä»€ä¹ˆé‡è¦","children":[]},{"level":3,"title":"ç”¨åˆ°çš„åˆ†æï¼š","slug":"ç”¨åˆ°çš„åˆ†æ","link":"#ç”¨åˆ°çš„åˆ†æ","children":[]}]},{"level":2,"title":"ä¸¾ä¸ªä¾‹å­ï¼š","slug":"ä¸¾ä¸ªä¾‹å­","link":"#ä¸¾ä¸ªä¾‹å­","children":[{"level":3,"title":"ä¼˜åŒ–å‰ï¼š","slug":"ä¼˜åŒ–å‰-1","link":"#ä¼˜åŒ–å‰-1","children":[]},{"level":3,"title":"LICM ä¼˜åŒ–åï¼š","slug":"licm-ä¼˜åŒ–å","link":"#licm-ä¼˜åŒ–å","children":[]}]},{"level":2,"title":"å‘½ä»¤è¡Œè°ƒç”¨ï¼š","slug":"å‘½ä»¤è¡Œè°ƒç”¨","link":"#å‘½ä»¤è¡Œè°ƒç”¨","children":[]},{"level":2,"title":"æ€»ç»“ä¸€å¥ï¼š","slug":"æ€»ç»“ä¸€å¥","link":"#æ€»ç»“ä¸€å¥","children":[{"level":3,"title":"LoopUnroll.cpp","slug":"loopunroll-cpp","link":"#loopunroll-cpp","children":[]},{"level":3,"title":"å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼š","slug":"å®ƒæ˜¯å¹²ä»€ä¹ˆçš„","link":"#å®ƒæ˜¯å¹²ä»€ä¹ˆçš„","children":[]},{"level":3,"title":"å®ƒçš„ç‰¹ç‚¹ï¼š","slug":"å®ƒçš„ç‰¹ç‚¹","link":"#å®ƒçš„ç‰¹ç‚¹","children":[]},{"level":3,"title":"ğŸ“– æ€»ç»“ä¸€å¥ï¼š","slug":"ğŸ“–-æ€»ç»“ä¸€å¥","link":"#ğŸ“–-æ€»ç»“ä¸€å¥","children":[]},{"level":3,"title":"JumpThreading.cpp","slug":"jumpthreading-cpp","link":"#jumpthreading-cpp","children":[]}]},{"level":2,"title":"ä»€ä¹ˆæ˜¯ Jump Threadingï¼Ÿ","slug":"ä»€ä¹ˆæ˜¯-jump-threading","link":"#ä»€ä¹ˆæ˜¯-jump-threading","children":[]},{"level":2,"title":"ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­ï¼š","slug":"ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­","link":"#ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­","children":[]},{"level":2,"title":"å®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ","slug":"å®ƒæ˜¯æ€ä¹ˆåšçš„","link":"#å®ƒæ˜¯æ€ä¹ˆåšçš„","children":[]},{"level":2,"title":"ä¸¾ä¸ª LLVM ä¸­çš„å…¸å‹åº”ç”¨ï¼š","slug":"ä¸¾ä¸ª-llvm-ä¸­çš„å…¸å‹åº”ç”¨","link":"#ä¸¾ä¸ª-llvm-ä¸­çš„å…¸å‹åº”ç”¨","children":[]},{"level":2,"title":"ä¼˜åŒ–æ•ˆæœï¼š","slug":"ä¼˜åŒ–æ•ˆæœ","link":"#ä¼˜åŒ–æ•ˆæœ","children":[]},{"level":2,"title":"æ€»ç»“ä¸€å¥ï¼š","slug":"æ€»ç»“ä¸€å¥-1","link":"#æ€»ç»“ä¸€å¥-1","children":[{"level":3,"title":"SLPVectorizer.cpp","slug":"slpvectorizer-cpp","link":"#slpvectorizer-cpp","children":[]},{"level":3,"title":"å®ƒæ€ä¹ˆåšï¼Ÿ","slug":"å®ƒæ€ä¹ˆåš","link":"#å®ƒæ€ä¹ˆåš","children":[]},{"level":3,"title":"ä¸¾ä¸ªä¾‹å­","slug":"ä¸¾ä¸ªä¾‹å­-1","link":"#ä¸¾ä¸ªä¾‹å­-1","children":[]},{"level":3,"title":"GlobalDCE.cpp","slug":"globaldce-cpp","link":"#globaldce-cpp","children":[]},{"level":3,"title":"Inliner.cpp","slug":"inliner-cpp","link":"#inliner-cpp","children":[]},{"level":3,"title":"SROA.cpp","slug":"sroa-cpp","link":"#sroa-cpp","children":[]}]},{"level":2,"title":"å®ƒçš„ä½œç”¨ï¼š","slug":"å®ƒçš„ä½œç”¨","link":"#å®ƒçš„ä½œç”¨","children":[]},{"level":2,"title":"æ€»ç»“ä¸€å¥ï¼š","slug":"æ€»ç»“ä¸€å¥-2","link":"#æ€»ç»“ä¸€å¥-2","children":[]}],"relativePath":"pages/posts/llvmOriPass.md","lastUpdated":1767171975000}'),{lazy:(e,t)=>e.name===t.name}),O={__name:"llvmOriPass",setup(e,{expose:t}){var r;const{data:k}=D(),p=y(),h=Object.assign(p.meta.frontmatter||{},((r=k.value)==null?void 0:r.frontmatter)||{});return p.meta.frontmatter=h,o("pageData",k.value),o("valaxy:frontmatter",h),globalThis.$frontmatter=h,t({frontmatter:{title:"LLVMå¸¸è§Pass",date:"2025-06-22",updated:"2025-10-13",categories:"LLVM",tags:["ç¬”è®°","pass"]}}),(a,d)=>{const g=c;return F(),u(g,{frontmatter:A(h)},{"main-content-md":l(()=>[...d[0]||(d[0]=[i("p",null,[i("code",null,"llvm/lib/Transforms/Scalar/"),s(" è¿™ä¸ªç›®å½•ï¼Œå®ƒæ˜¯ LLVM æºç é‡Œ"),i("strong",null,"æœ€é‡è¦"),s("çš„ Pass å®ç°ç›®å½•ä¹‹ä¸€ï¼Œæ”¾çš„éƒ½æ˜¯"),i("strong",null,"åŸºäºæ ‡é‡çº§ä¼˜åŒ–ï¼ˆScalar Optimizationï¼‰"),s(" çš„ Pass â€”â€” ä¹Ÿå°±æ˜¯ä¸æ¶‰åŠå¤æ‚å¾ªç¯åµŒå¥—ã€å¤šç»´æ•°ç»„ã€çŸ¢é‡åŒ–çš„é«˜çº§ä¼˜åŒ–ï¼Œè€Œæ˜¯é’ˆå¯¹å•ä¸ªå€¼ã€å•ä¸ªå˜é‡ã€å•ä¸ªåŸºæœ¬å—ã€å•ä¸ªå¾ªç¯çš„"),i("strong",null,"å±€éƒ¨ä¼˜åŒ–"),s("ã€‚")],-1),i("h2",{id:"pass-æ³¨å†Œå’Œè°ƒç”¨",tabindex:"-1"},[s("Pass æ³¨å†Œå’Œè°ƒç”¨ "),i("a",{class:"header-anchor",href:"#pass-æ³¨å†Œå’Œè°ƒç”¨","aria-label":'Permalink to "Pass æ³¨å†Œå’Œè°ƒç”¨"'},"â€‹")],-1),i("p",null,[s("è¿™äº› Pass éƒ½æ˜¯é€šè¿‡ "),i("code",null,"PassBuilder"),s(" æˆ– "),i("code",null,"legacy PassManager"),s(" æ³¨å†Œçš„ã€‚ åœ¨ "),i("code",null,"llvm/lib/Passes/PassRegistry.def"),s(" æˆ– "),i("code",null,"llvm/lib/Passes/PassBuilder.cpp"),s(" é‡Œèƒ½æ‰¾åˆ°å®ƒä»¬çš„åˆ«åå’Œè°ƒç”¨æ–¹å¼ã€‚")],-1),i("h3",{id:"mem2reg-cpp",tabindex:"-1"},[s("Mem2Reg.cpp "),i("a",{class:"header-anchor",href:"#mem2reg-cpp","aria-label":'Permalink to "Mem2Reg.cpp"'},"â€‹")],-1),i("p",null,"llvm-project-release-13.x\\llvm-project-release-13.x\\llvm\\lib\\Transforms\\Utils\\Mem2Reg.cpp",-1),i("p",null,"Mem2Reg æ˜¯ LLVM ä¸­æœ€å¸¸ç”¨ã€æœ€åŸºç¡€ã€æ€§èƒ½æ”¶ç›Šæœ€å¤§çš„ Passï¼ŒæŠŠ IR ä»â€œå‘½ä»¤å¼å†…å­˜æ¨¡å‹â€è½¬æˆâ€œSSA å¯„å­˜å™¨æ¨¡å‹â€ï¼Œä¾¿äºåç»­åšæ‰€æœ‰é«˜çº§ä¼˜åŒ–ï¼ˆæ¯”å¦‚ GVNã€LICMã€DCE ç­‰ï¼‰ã€‚",-1),i("details",null,[i("summary",null,"Mem2Reg.cpp"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- Mem2Reg.cpp - The -mem2reg pass, a wrapper around the Utils lib ----===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This pass is a simple pass wrapper around the PromoteMemToReg function call")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// exposed by the Utils library.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/Mem2Reg.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/ADT/Statistic.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Analysis/AssumptionCache.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/BasicBlock.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/Dominators.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/Function.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/Instructions.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/IR/PassManager.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/InitializePasses.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Pass.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/Casting.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Transforms/Utils/PromoteMemToReg.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <vector>")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," namespace"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," llvm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#define"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," DEBUG_TYPE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mem2reg"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"STATISTIC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(NumPromoted, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},`"Number of alloca's promoted"`),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," bool"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," promoteMemoryToRegister"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Function"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"F"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"DominatorTree"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"DT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                   AssumptionCache"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"AC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::vector"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AllocaInst "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Allocas;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," BasicBlock "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"BB "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," F."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getEntryBlock"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // Get the entry node for the function")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Changed "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," while"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   Allocas."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"clear"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"   // Find allocas that are safe to promote, by looking at all instructions in")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"   // the entry node")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"BasicBlock"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::iterator I "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," BB."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"begin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), E "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," --"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"BB."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"end"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(); I "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," E; "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"I)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"     if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (AllocaInst "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AI "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," dyn_cast"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AllocaInst"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">(I))"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // Is it an alloca?")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"       if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isAllocaPromotable"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(AI))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"         Allocas."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"push_back"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(AI);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (Allocas."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"empty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"     break"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"   PromoteMemToReg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Allocas, DT, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AC);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   NumPromoted "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Allocas."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"size"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   Changed "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Changed;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PreservedAnalyses"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PromotePass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"run"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Function"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"F"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FunctionAnalysisManager"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"AM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," auto"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DT "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AM.getResult"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DominatorTreeAnalysis"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," auto"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AC "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AM.getResult"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AssumptionAnalysis"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"promoteMemoryToRegister"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F, DT, AC))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PreservedAnalyses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"all"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," PreservedAnalyses PA;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," PA.preserveSet"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CFGAnalyses"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," PA;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"namespace"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"struct"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PromoteLegacyPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," FunctionPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // Pass identification, replacement for typeid")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," static"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," char"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ID;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PromoteLegacyPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FunctionPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ID) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"   initializePromoteLegacyPassPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PassRegistry"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassRegistry"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // runOnFunction - To run this pass, first we calculate the alloca")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // instructions that are safe for promotion, then we promote each one.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," bool"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," runOnFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Function"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"F"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"override"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"skipFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"     return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   DominatorTree "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DT "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getAnalysis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"DominatorTreeWrapperPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getDomTree"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   AssumptionCache "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AC "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       getAnalysis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AssumptionCacheTracker"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAssumptionCache"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," promoteMemoryToRegister"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(F, DT, AC);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getAnalysisUsage"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AnalysisUsage"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"AU"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   AU.addRequired"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AssumptionCacheTracker"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   AU.addRequired"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DominatorTreeWrapperPass"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   AU."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setPreservesCFG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // end anonymous namespace")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"char"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PromoteLegacyPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::ID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"INITIALIZE_PASS_BEGIN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(PromoteLegacyPass, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"mem2reg"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Promote Memory to "')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'                                                   "Register"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                     false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"INITIALIZE_PASS_DEPENDENCY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(AssumptionCacheTracker)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"INITIALIZE_PASS_DEPENDENCY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(DominatorTreeWrapperPass)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"INITIALIZE_PASS_END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(PromoteLegacyPass, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"mem2reg"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Promote Memory to Register"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                   false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// createPromoteMemoryToRegister - Provide an entry point to create this pass.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FunctionPass"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"llvm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"createPromoteMemoryToRegisterPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," return"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," PromoteLegacyPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"å…·ä½“åšæ³•"),i("h3",{id:"åŠŸèƒ½æ€»ç»“ä¸€å¥",tabindex:"-1"},[s("åŠŸèƒ½æ€»ç»“ä¸€å¥ï¼š "),i("a",{class:"header-anchor",href:"#åŠŸèƒ½æ€»ç»“ä¸€å¥","aria-label":'Permalink to "åŠŸèƒ½æ€»ç»“ä¸€å¥ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,[s("è¿™æ˜¯ä¸€ä¸ªå°è£…å¥½çš„ Passï¼Œè°ƒç”¨ "),i("code",null,"PromoteMemToReg"),s(" å·¥å…·å‡½æ•°ï¼Œæ¥æŠŠ "),i("code",null,"alloca"),s(" å±€éƒ¨å˜é‡ä¼˜åŒ–æˆ SSA å¯„å­˜å™¨å€¼ã€‚")])]),i("h2",{id:"é€æ®µè§£è¯»",tabindex:"-1"},[s("é€æ®µè§£è¯» "),i("a",{class:"header-anchor",href:"#é€æ®µè§£è¯»","aria-label":'Permalink to "é€æ®µè§£è¯»"'},"â€‹")]),i("h3",{id:"_1-å¯¼å…¥å¤´æ–‡ä»¶",tabindex:"-1"},[s("1. å¯¼å…¥å¤´æ–‡ä»¶ "),i("a",{class:"header-anchor",href:"#_1-å¯¼å…¥å¤´æ–‡ä»¶","aria-label":'Permalink to "1. å¯¼å…¥å¤´æ–‡ä»¶"'},"â€‹")]),i("p",null,[s("å¯¼å…¥éœ€è¦ç”¨åˆ°çš„ IR æ•°æ®ç»“æ„ã€åˆ†æå™¨ï¼ˆDominatorTreeã€AssumptionCacheï¼‰ä»¥åŠå·¥å…·åº“ "),i("code",null,"PromoteMemToReg.h"),s("ã€‚")]),i("h3",{id:"_2-promotememorytoregister-å‡½æ•°",tabindex:"-1"},[s("2. "),i("code",null,"promoteMemoryToRegister()"),s(" å‡½æ•° "),i("a",{class:"header-anchor",href:"#_2-promotememorytoregister-å‡½æ•°","aria-label":'Permalink to "2. `promoteMemoryToRegister()` å‡½æ•°"'},"â€‹")]),i("p",null,"åŠŸèƒ½ï¼š"),i("ul",null,[i("li",null,[s("éå† "),i("code",null,"Function"),s(" çš„ "),i("code",null,"entry block")]),i("li",null,[s("æ‰¾åˆ°æ‰€æœ‰ "),i("code",null,"alloca"),s(" æŒ‡ä»¤")]),i("li",null,[s("åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯"),i("strong",null,"å¯æå‡çš„"),s("ï¼ˆ"),i("code",null,"isAllocaPromotable"),s("ï¼‰")]),i("li",null,[s("è°ƒç”¨ "),i("code",null,"PromoteMemToReg()"),s(" è¿›è¡Œå¯„å­˜å™¨åŒ–æ›¿æ¢")])]),i("p",null,"æ ¸å¿ƒï¼š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PromoteMemToReg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Allocas, DT, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AC);")])])]),i("button",{class:"collapse"})]),i("p",null,[s("âš™ï¸ æ³¨æ„ï¼š"),i("strong",null,"PromoteMemToReg"),s(" çœŸæ­£åšäº†ï¼š")]),i("ul",null,[i("li",null,"SSA é‡å‘½å"),i("li",null,"Dominator Tree åˆ†æ"),i("li",null,"Phi èŠ‚ç‚¹æ’å…¥"),i("li",null,"æ›¿æ¢ load/store æˆ SSA å€¼")]),i("p",null,[s("è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æŠŠæ ¸å¿ƒé€»è¾‘ "),i("code",null,"PromoteMemToReg"),s(" åŒ…è£…æˆä¸€ä¸ª LLVM Passï¼Œä¾› PassManager è°ƒåº¦è°ƒç”¨ã€‚")])],-1),i("h3",{id:"gvn-cpp",tabindex:"-1"},[s("GVN.cpp "),i("a",{class:"header-anchor",href:"#gvn-cpp","aria-label":'Permalink to "GVN.cpp"'},"â€‹")],-1),i("p",null,'"D:\\TZB\\study\\day2\\llvm-project-release-13.x\\llvm-project-release-13.x\\llvm\\lib\\Transforms\\Scalar\\GVN.cpp"',-1),i("p",null,[i("code",null,"GVN.cpp"),s(" æ˜¯ LLVM ä¼˜åŒ–å™¨é‡Œéå¸¸ç»å…¸ã€æ ¸å¿ƒçš„ä¸€ä¸ª"),i("strong",null,"å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤ï¼ˆCSEï¼‰+ æ­»è½½å…¥åˆ é™¤ï¼ˆDead Load Eliminationï¼‰"),s(" Passã€‚")],-1),i("details",null,[i("summary",null,"è¯¦ç»†å†…å®¹"),i("h2",{id:"åŸè‹±æ–‡æ³¨é‡Š",tabindex:"-1"},[s("åŸè‹±æ–‡æ³¨é‡Š "),i("a",{class:"header-anchor",href:"#åŸè‹±æ–‡æ³¨é‡Š","aria-label":'Permalink to "åŸè‹±æ–‡æ³¨é‡Š"'},"â€‹")]),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- GVN.cpp - Eliminate redundant values and loads ---------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This pass performs global value numbering to eliminate fully redundant")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// instructions.  It also performs simple dead load elimination.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Note that this pass does the value numbering itself; it does not use the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// ValueNumbering analysis passes.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})]),i("h2",{id:"ä¸­æ–‡ç¿»è¯‘-é€å¥è§£è¯»",tabindex:"-1"},[s("ä¸­æ–‡ç¿»è¯‘ + é€å¥è§£è¯» "),i("a",{class:"header-anchor",href:"#ä¸­æ–‡ç¿»è¯‘-é€å¥è§£è¯»","aria-label":'Permalink to "ä¸­æ–‡ç¿»è¯‘ + é€å¥è§£è¯»"'},"â€‹")]),i("h3",{id:"è¿™ä¸ª-pass-å®ç°äº†",tabindex:"-1"},[s("è¿™ä¸ª Pass å®ç°äº†ï¼š "),i("a",{class:"header-anchor",href:"#è¿™ä¸ª-pass-å®ç°äº†","aria-label":'Permalink to "è¿™ä¸ª Pass å®ç°äº†ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"å…¨å±€å€¼ç¼–å· (GVN, Global Value Numbering)")]),i("blockquote",null,[i("p",null,"GVN æ˜¯ä¸€ç§å¸¸è§çš„ä¼˜åŒ–æ–¹æ³•ï¼Œé€šè¿‡ç»™è¡¨è¾¾å¼èµ‹äºˆâ€œå€¼å·â€æ¥è¯†åˆ«ç­‰ä»·è¡¨è¾¾å¼ï¼Œå†æ¶ˆé™¤é‡å¤è®¡ç®—ã€‚")]),i("p",null,[s("ç®€å•è¯´ï¼š å¦‚æœç¨‹åºé‡Œæœ‰å¤šä¸ªè¡¨è¾¾å¼è®¡ç®—ç»“æœç›¸åŒï¼ŒGVN å¯ä»¥"),i("strong",null,"ä¿ç•™ç¬¬ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œåç»­å¤ç”¨ï¼Œä¸å†é‡å¤è®¡ç®—ã€‚")]),i("h3",{id:"æ³¨æ„",tabindex:"-1"},[s("æ³¨æ„ï¼š "),i("a",{class:"header-anchor",href:"#æ³¨æ„","aria-label":'Permalink to "æ³¨æ„ï¼š"'},"â€‹")]),i("blockquote",null,[i("p",null,[s("è¿™ä¸ª Pass è‡ªå·±åšäº†å€¼ç¼–å·ï¼ˆvalue numberingï¼‰ï¼Œ"),i("strong",null,[s("ä¸ä¾èµ– "),i("code",null,"ValueNumbering"),s(" åˆ†æå™¨ Pass")]),s("ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª"),i("strong",null,"è‡ªåŒ…å«çš„ GVN å®ç°"),s("ã€‚")])]),i("h3",{id:"ä¼˜åŒ–å‰",tabindex:"-1"},[s("ä¼˜åŒ–å‰ï¼š "),i("a",{class:"header-anchor",href:"#ä¼˜åŒ–å‰","aria-label":'Permalink to "ä¼˜åŒ–å‰ï¼š"'},"â€‹")]),i("div",{class:"language-llvm vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"llvm"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"%a = add i32 %x, %y")]),s(`
`),i("span",{class:"line"},[i("span",null,"%b = add i32 %x, %y")]),s(`
`),i("span",{class:"line"},[i("span",null,"%r = add i32 %a, %b")])])]),i("button",{class:"collapse"})]),i("h3",{id:"gvn-ä¼˜åŒ–å",tabindex:"-1"},[s("GVN ä¼˜åŒ–åï¼š "),i("a",{class:"header-anchor",href:"#gvn-ä¼˜åŒ–å","aria-label":'Permalink to "GVN ä¼˜åŒ–åï¼š"'},"â€‹")]),i("div",{class:"language-llvm vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"llvm"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"%a = add i32 %x, %y")]),s(`
`),i("span",{class:"line"},[i("span",null,"%r = add i32 %a, %a")])])]),i("button",{class:"collapse"})]),i("p",null,[i("strong",null,"GVN.cpp å®ç°äº†å…¨å±€å€¼ç¼–å· (GVN)ï¼Œç”¨äºæ¶ˆé™¤å†—ä½™è®¡ç®—å’Œæ­»è½½å…¥ã€‚"),s(" æ˜¯ LLVM IR ä¸­ç»å…¸çš„ CSE ä¼˜åŒ–æ‰‹æ®µï¼Œæ¯” DCEã€ADCE è¦†ç›–é¢æ›´å¹¿ã€ä½œç”¨æ›´å¼ºã€‚")])],-1),i("h3",{id:"dce-cpp",tabindex:"-1"},[s("DCE.cpp "),i("a",{class:"header-anchor",href:"#dce-cpp","aria-label":'Permalink to "DCE.cpp"'},"â€‹")],-1),i("p",null,[i("strong",null,"Dead Code Elimination (DCE)"),s(" æ˜¯ç¼–è¯‘å™¨ä¸­å¸¸è§çš„ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œæ—¨åœ¨åˆ é™¤ç¨‹åºä¸­"),i("strong",null,"ä¸ä¼šå½±å“æœ€ç»ˆæ‰§è¡Œç»“æœçš„æ— ç”¨æŒ‡ä»¤"),s("ã€‚å®ƒé€šè¿‡åˆ†æç¨‹åºçš„"),i("strong",null,"å€¼ä½¿ç”¨æƒ…å†µå’Œå‰¯ä½œç”¨"),s("ï¼Œè¯†åˆ«å‡ºæ—¢æ²¡æœ‰è¢«å…¶ä»–æŒ‡ä»¤ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šå¯¹ç¨‹åºçŠ¶æ€äº§ç”Ÿå½±å“ï¼ˆå¦‚å†…å­˜å†™å…¥ã€å‡½æ•°è°ƒç”¨å‰¯ä½œç”¨ç­‰ï¼‰çš„è®¡ç®—å’Œæ“ä½œï¼Œå°†è¿™äº›å†—ä½™ä»£ç å®‰å…¨ç§»é™¤ï¼Œä»è€Œå‡å°‘ç¨‹åºä½“ç§¯ã€æå‡è¿è¡Œæ•ˆç‡ã€‚DCE é€šå¸¸ä½œä¸ºä¸­åæœŸä¼˜åŒ–æµç¨‹ä¸­çš„åŸºç¡€ Passï¼Œä¸ºåç»­ä¼˜åŒ–æä¾›æ›´ç®€æ´çš„ä¸­é—´è¡¨ç¤º (IR)ã€‚")],-1),i("details",null,[i("summary",null,"ä»£ç ä¸Šçš„åŸæ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- DCE.cpp - Code to perform dead code elimination --------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This file implements dead inst elimination and dead code elimination.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Dead Inst Elimination performs a single pass over the function removing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// instructions that are obviously dead.  Dead Code Elimination is similar, but")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// it rechecks instructions that were used by removed instructions to see if")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// they are newly dead.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("h3",{id:"adce-cpp",tabindex:"-1"},[s("ADCE.cpp "),i("a",{class:"header-anchor",href:"#adce-cpp","aria-label":'Permalink to "ADCE.cpp"'},"â€‹")],-1),i("p",null,[i("strong",null,"Aggressive Dead Code Elimination (ADCE)"),s(" æ˜¯ä¸€ç§æ¯”ä¼ ç»Ÿ DCE æ›´æ¿€è¿›çš„æ­»ä»£ç åˆ é™¤ä¼˜åŒ–æ–¹æ³•ã€‚å®ƒé€šè¿‡"),i("strong",null,"ä¹è§‚åœ°å‡è®¾æ‰€æœ‰æŒ‡ä»¤éƒ½æ˜¯æ— ç”¨çš„"),s("ï¼Œç„¶åä»ç¨‹åºä¸­å¿…é¡»æ‰§è¡Œã€æœ‰å‰¯ä½œç”¨æˆ–å½±å“æ§åˆ¶æµçš„æŒ‡ä»¤å‡ºå‘ï¼Œåå‘åˆ†æä¾èµ–å…³ç³»ï¼Œæ ‡è®°å‡ºçœŸæ­£â€œæ´»è·ƒâ€çš„æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ é™¤æ‰€æœ‰æœªè¢«æ ‡è®°çš„æ­»ä»£ç ã€‚ADCE èƒ½æ¸…é™¤ä¸€äº›å¸¸è§„ DCE æ— æ³•è¯†åˆ«çš„å†—ä½™è®¡ç®—ï¼Œå°¤å…¶æ“…é•¿æ¶ˆé™¤"),i("strong",null,"å¾ªç¯å†…éƒ¨æˆ–å¤æ‚æ§åˆ¶æµä¸­æ— å½±å“çš„è®¡ç®—æŒ‡ä»¤"),s("ï¼Œæœ‰æ•ˆç®€åŒ–ä¸­é—´è¡¨ç¤º (IR)ï¼Œæé«˜åç»­ä¼˜åŒ–ä¸ç”Ÿæˆä»£ç çš„è´¨é‡ã€‚")],-1),i("details",null,[i("summary",null,"ä»£ç ä¸Šçš„åŸæ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- ADCE.cpp - Code to perform dead code elimination -------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This file implements the Aggressive Dead Code Elimination pass.  This pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// optimistically assumes that all instructions are dead until proven otherwise,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// allowing it to eliminate dead computations that other DCE passes do not")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// catch, particularly involving loop computations.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("h3",{id:"licm-cpp",tabindex:"-1"},[s("LICM.cpp "),i("a",{class:"header-anchor",href:"#licm-cpp","aria-label":'Permalink to "LICM.cpp"'},"â€‹")],-1),i("p",null,"LICM (Loop Invariant Code Motion) æ˜¯ LLVM ä¸­ç”¨äºå¾ªç¯ä¼˜åŒ–çš„é‡è¦ Passï¼Œä¸»è¦åŠŸèƒ½æ˜¯å°†å¾ªç¯å†…æ¯æ¬¡æ‰§è¡Œç»“æœç›¸åŒã€ä¸”ä¸ä¾èµ–å¾ªç¯å˜é‡çš„æŒ‡ä»¤ç§»å‡ºå¾ªç¯ä½“ï¼ˆhoisting åˆ° preheaderï¼‰æˆ–å»¶ååˆ°å¾ªç¯é€€å‡ºåï¼ˆsinking åˆ° exit blockï¼‰ï¼Œä»¥å‡å°‘å¾ªç¯å†…é‡å¤è®¡ç®—ï¼Œæå‡æ‰§è¡Œæ•ˆç‡ã€‚åŒæ—¶ï¼ŒLICM è¿˜èƒ½åˆ©ç”¨åˆ«ååˆ†æï¼Œå°†åœ¨å¾ªç¯å†…å§‹ç»ˆè®¿é—®åŒä¸€å†…å­˜åœ°å€ä¸”æ— åˆ«åå†²çªçš„å˜é‡æå‡ä¸ºå¯„å­˜å™¨å˜é‡ï¼Œè¿›ä¸€æ­¥é™ä½å†…å­˜è®¿é—®å¼€é”€ã€‚è¿™ä¸€ä¼˜åŒ–ä¸ä»…æå‡è¿è¡Œæ—¶æ€§èƒ½ï¼Œä¹Ÿä¸ºåç»­ä¸­ç«¯ä¼˜åŒ–ç®€åŒ– IR ç»“æ„ï¼Œæä¾›ä¾¿åˆ©ã€‚",-1),i("details",null,[i("summary",null,"ä»£ç ä¸Šçš„åŸæ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===-- LICM.cpp - Loop Invariant Code Motion Pass ------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This pass performs loop invariant code motion, attempting to remove as much")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// code from the body of a loop as possible.  It does this by either hoisting")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// code into the preheader block, or by sinking code to the exit blocks if it is")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// safe.  This pass also promotes must-aliased memory locations in the loop to")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'// live in registers, thus hoisting and sinking "invariant" loads and stores.')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Hoisting operations out of loops is a canonicalization transform.  It")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// enables and simplifies subsequent optimizations in the middle-end.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Rematerialization of hoisted instructions to reduce register pressure is the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// responsibility of the back-end, which has more accurate information about")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// register pressure and also handles other optimizations than LICM that")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// increase live-ranges.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This pass uses alias analysis for two purposes:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  1. Moving loop invariant loads and calls out of loops.  If we can determine")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     that a load or call inside of a loop never aliases anything stored to,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     we can hoist it or sink it like any other instruction.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2. Scalar Promotion of Memory - If there is a store instruction inside of")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     the loop, we try to move the store to happen AFTER the loop instead of")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     inside of the loop.  This can only happen if a few conditions are true:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//       A. The pointer stored through is loop invariant")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//       B. There are no stores or loads in the loop which _may_ alias the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//          pointer.  There are no calls in the loop which mod/ref the pointer.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     If these conditions are true, we can promote the loads and stores in the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     loop of the pointer to use a temporary alloca'd variable.  We then use")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//     the SSAUpdater to construct the appropriate SSA form for the value.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"åŸç†ç®€å•æ¦‚æ‹¬"),i("h3",{id:"è¿™ä¸ª-pass-å®ç°äº†-1",tabindex:"-1"},[s("è¿™ä¸ª Pass å®ç°äº†ï¼š "),i("a",{class:"header-anchor",href:"#è¿™ä¸ª-pass-å®ç°äº†-1","aria-label":'Permalink to "è¿™ä¸ª Pass å®ç°äº†ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"å¾ªç¯ä¸å˜ä»£ç å¤–æï¼ˆLoop Invariant Code Motion, LICMï¼‰")]),i("h3",{id:"å®ƒåšä»€ä¹ˆ",tabindex:"-1"},[s("å®ƒåšä»€ä¹ˆï¼Ÿ "),i("a",{class:"header-anchor",href:"#å®ƒåšä»€ä¹ˆ","aria-label":'Permalink to "å®ƒåšä»€ä¹ˆï¼Ÿ"'},"â€‹")]),i("p",null,[i("strong",null,"æŠŠå¾ªç¯é‡Œä¸ä¾èµ–å¾ªç¯å˜é‡ã€æ¯æ¬¡æ‰§è¡Œç»“æœä¸€æ ·çš„æŒ‡ä»¤"),s("ï¼š")]),i("ul",null,[i("li",null,[i("strong",null,"æåˆ°å¾ªç¯å‰"),s("ï¼ˆpreheader blockï¼‰æ‰§è¡Œï¼Œç§°ä¸º "),i("strong",null,"hoisting")]),i("li",null,[s("æˆ–è€…"),i("strong",null,"å»¶ååˆ°å¾ªç¯é€€å‡ºåæ‰§è¡Œ"),s("ï¼Œç§°ä¸º "),i("strong",null,"sinking")])]),i("p",null,"è¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ï¼Œæå‡æ€§èƒ½ã€‚"),i("h3",{id:"è¿˜èƒ½åš",tabindex:"-1"},[s("è¿˜èƒ½åšï¼š "),i("a",{class:"header-anchor",href:"#è¿˜èƒ½åš","aria-label":'Permalink to "è¿˜èƒ½åšï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"å†…å­˜æ ‡é‡åŒ–ï¼ˆScalar Promotionï¼‰")]),i("ul",null,[i("li",null,[s("å¦‚æœä¸€ä¸ªå¾ªç¯å†…å¯¹æŸä¸ªåœ°å€ï¼ˆå¦‚ "),i("code",null,"a[i]"),s("ï¼‰çš„ "),i("code",null,"load/store"),s(" æ²¡æœ‰å…¶ä»–æŒ‡ä»¤ä¼šæ”¹åŠ¨æˆ–è€…å†²çªï¼ˆaliasï¼‰")]),i("li",null,"é‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒå˜æˆå¯„å­˜å™¨å˜é‡ï¼Œæå‡æ•ˆç‡")]),i("h3",{id:"ä¸ºä»€ä¹ˆé‡è¦",tabindex:"-1"},[s("ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ "),i("a",{class:"header-anchor",href:"#ä¸ºä»€ä¹ˆé‡è¦","aria-label":'Permalink to "ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ"'},"â€‹")]),i("ul",null,[i("li",null,[i("p",null,[i("strong",null,"å¾ªç¯ä¸å˜ä»£ç å¤–æ"),s(" æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–çš„åŸºç¡€æ‰‹æ®µä¹‹ä¸€ï¼Œå‡ ä¹æ‰€æœ‰ä¼˜åŒ–å™¨éƒ½ä¼šåš")])]),i("li",null,[i("p",null,"å®ƒèƒ½ç®€åŒ–åç»­ä¼˜åŒ–è¿‡ç¨‹ï¼Œæ¯”å¦‚ï¼š"),i("ul",null,[i("li",null,"è®© GVNã€DCE æ›´å®¹æ˜“å‘ç°å†—ä½™ä»£ç "),i("li",null,"å‡å°‘å¾ªç¯ä½“å†…æŒ‡ä»¤æ•°é‡ï¼Œæå‡æ‰§è¡Œé€Ÿåº¦")])])]),i("h3",{id:"ç”¨åˆ°çš„åˆ†æ",tabindex:"-1"},[s("ç”¨åˆ°çš„åˆ†æï¼š "),i("a",{class:"header-anchor",href:"#ç”¨åˆ°çš„åˆ†æ","aria-label":'Permalink to "ç”¨åˆ°çš„åˆ†æï¼š"'},"â€‹")]),i("ul",null,[i("li",null,[i("p",null,[i("strong",null,"åˆ«ååˆ†æï¼ˆAlias Analysisï¼‰")]),i("ul",null,[i("li",null,"åˆ¤æ–­å†…å­˜è®¿é—®æ˜¯å¦å¯èƒ½å†²çªï¼Œä¿è¯æå–/å»¶åä¸ä¼šå½±å“ç¨‹åºè¯­ä¹‰")])])]),i("h2",{id:"ä¸¾ä¸ªä¾‹å­",tabindex:"-1"},[s("ä¸¾ä¸ªä¾‹å­ï¼š "),i("a",{class:"header-anchor",href:"#ä¸¾ä¸ªä¾‹å­","aria-label":'Permalink to "ä¸¾ä¸ªä¾‹å­ï¼š"'},"â€‹")]),i("h3",{id:"ä¼˜åŒ–å‰-1",tabindex:"-1"},[s("ä¼˜åŒ–å‰ï¼š "),i("a",{class:"header-anchor",href:"#ä¼˜åŒ–å‰-1","aria-label":'Permalink to "ä¼˜åŒ–å‰ï¼š"'},"â€‹")]),i("div",{class:"language-llvm vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"llvm"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"for (int i = 0; i < N; ++i) {")]),s(`
`),i("span",{class:"line"},[i("span",null,"  y = a + b;  // æ¯æ¬¡å¾ªç¯ç»“æœä¸€æ ·ï¼Œæ²¡å¿…è¦æ”¾é‡Œé¢")]),s(`
`),i("span",{class:"line"},[i("span",null,"  sum += y * A[i];")]),s(`
`),i("span",{class:"line"},[i("span",null,"}")])])]),i("button",{class:"collapse"})]),i("h3",{id:"licm-ä¼˜åŒ–å",tabindex:"-1"},[s("LICM ä¼˜åŒ–åï¼š "),i("a",{class:"header-anchor",href:"#licm-ä¼˜åŒ–å","aria-label":'Permalink to "LICM ä¼˜åŒ–åï¼š"'},"â€‹")]),i("div",{class:"language-llvm vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"llvm"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"y = a + b;")]),s(`
`),i("span",{class:"line"},[i("span",null,"for (int i = 0; i < N; ++i) {")]),s(`
`),i("span",{class:"line"},[i("span",null,"  sum += y * A[i];")]),s(`
`),i("span",{class:"line"},[i("span",null,"}")])])]),i("button",{class:"collapse"})]),i("h2",{id:"å‘½ä»¤è¡Œè°ƒç”¨",tabindex:"-1"},[s("å‘½ä»¤è¡Œè°ƒç”¨ï¼š "),i("a",{class:"header-anchor",href:"#å‘½ä»¤è¡Œè°ƒç”¨","aria-label":'Permalink to "å‘½ä»¤è¡Œè°ƒç”¨ï¼š"'},"â€‹")]),i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"opt"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -licm"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -S"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," input.ll"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -o"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," output.ll")])])]),i("button",{class:"collapse"})]),i("h2",{id:"æ€»ç»“ä¸€å¥",tabindex:"-1"},[s("æ€»ç»“ä¸€å¥ï¼š "),i("a",{class:"header-anchor",href:"#æ€»ç»“ä¸€å¥","aria-label":'Permalink to "æ€»ç»“ä¸€å¥ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"LICM æ˜¯ä¸€ç§ç»å…¸çš„å¾ªç¯ä¼˜åŒ–æ‰‹æ®µï¼Œå°†å¾ªç¯å†…ä¸ä¾èµ–å¾ªç¯å˜é‡ã€ç»“æœå›ºå®šçš„è®¡ç®—æå‰æˆ–å»¶åæ‰§è¡Œï¼Œä»è€Œå‡å°‘å¾ªç¯ä½“å¼€é”€ï¼Œæå‡æ€§èƒ½ã€‚")])],-1),i("h3",{id:"loopunroll-cpp",tabindex:"-1"},[s("LoopUnroll.cpp "),i("a",{class:"header-anchor",href:"#loopunroll-cpp","aria-label":'Permalink to "LoopUnroll.cpp"'},"â€‹")],-1),i("p",null,[s("ä¸€ç§å¸¸è§ä¼˜åŒ–æ‰‹æ®µï¼Œé€šè¿‡æŠŠå¾ªç¯ä½“å¤åˆ¶å¤šä»½ï¼Œå‡å°‘å¾ªç¯æ§åˆ¶å¼€é”€ï¼ˆæ¯”å¦‚ "),i("code",null,"for"),s(" è®¡æ•°å’Œåˆ¤æ–­ï¼‰ä»¥åŠå¢åŠ æŒ‡ä»¤çº§å¹¶è¡Œæ€§ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚")],-1),i("details",null,[i("summary",null,"ä»£ç "),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- LoopUnroll.cpp - Code to perform loop unrolling --------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This file implements loop unrolling.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// æœ¬æ–‡ä»¶å®ç°äº†å¾ªç¯å±•å¼€ï¼ˆLoop Unrollingï¼‰åŠŸèƒ½ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "PassDetail.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/Analysis/LoopAnalysis.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/Dialect/Affine/IR/AffineOps.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/Dialect/Affine/Passes.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/IR/AffineExpr.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/IR/AffineMap.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/IR/Builders.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "mlir/Transforms/LoopUtils.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/ADT/DenseMap.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/CommandLine.h"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "llvm/Support/Debug.h"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," namespace"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mlir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"#define"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," DEBUG_TYPE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "affine-loop-unroll"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"namespace"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// TODO: this is really a test pass and should be moved out of dialect")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// transforms.")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// Loop unrolling pass. Unrolls all innermost loops unless full unrolling and a")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// full unroll threshold was specified, in which case, fully unrolls all loops")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// with trip count less than the specified threshold. The latter is for testing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// purposes, especially for testing outer loop unrolling.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"struct"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AffineLoopUnrollBase"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // Callback to obtain unroll factors; if this has a callable target, takes")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // precedence over command-line argument or passed argument.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  const"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::function"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(AffineForOp)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," getUnrollFactor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUnrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"nullptr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoopUnroll"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"other"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineLoopUnrollBase"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">(other),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        getUnrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(other.getUnrollFactor) {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  explicit"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"      Optional"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"unrollFactor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," None, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," unrollUpToFactor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      bool"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," unrollFull"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      const"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"function"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")> "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"getUnrollFactor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," nullptr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUnrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(getUnrollFactor) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (unrollFactor)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"      this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"->unrollFactor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"unrollFactor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"->unrollUpToFactor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," unrollUpToFactor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"->unrollFull "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," unrollFull;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," runOnFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"override"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  /// Unroll this for op. Returns failure if nothing was done.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  LogicalResult"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," runOnAffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," forOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // end anonymous namespace")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// Returns true if no other affine.for ops are nested within.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," bool"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," isInnermostAffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," forOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // Only for the innermost affine.for op's.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," isInnermost "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  forOp."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"walk"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," thisForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Since this is a post order walk, we are able to conclude here.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    isInnermost "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (thisForOp "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," WalkResult"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"interrupt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  });")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," isInnermost;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// Gathers loops that have no affine.for's nested within.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"static"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," gatherInnermostLoops"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FuncOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                 SmallVectorImpl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"loops"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  f."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"walk"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," forOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isInnermostAffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      loops."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"push_back"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  });")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"runOnFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (unrollFull "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," unrollFullThreshold."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"hasValue"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Store short loops as we walk.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SmallVector"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AffineForOp, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," loops;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Gathers all loops with trip count <= minTripCount. Do a post order walk")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // so that loops are gathered from innermost to outermost (or else unrolling")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // an outer one may delete gathered inner ones).")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    getFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"walk"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," forOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      Optional"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<uint64_t>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tripCount "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getConstantTripCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (tripCount."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"hasValue"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tripCount."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getValue"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," unrollFullThreshold)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        loops."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"push_back"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    });")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"auto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," forOp : loops)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"loopUnrollFull"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // If the call back is provided, we will recurse until no loops are found.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  FuncOp func "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getFunction"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  SmallVector"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AffineForOp, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," loops;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," numRepetitions "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"||"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," getUnrollFactor; i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    loops."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"clear"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    gatherInnermostLoops"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(func, loops);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (loops."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"empty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      break"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," unrolled "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"auto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," forOp : loops)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      unrolled "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," succeeded"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"runOnAffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"unrolled)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      // Break out if nothing was unrolled.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      break"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// Unrolls a 'affine.for' op. Returns success if the loop was unrolled,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// failure otherwise. The default unroll factor is 4.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LogicalResult"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"runOnAffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," forOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // Use the function callback if one was provided.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (getUnrollFactor)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," loopUnrollByFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUnrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // Unroll completely if full loop unroll was specified.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (unrollFull)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," loopUnrollFull"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // Otherwise, unroll by the given unroll factor.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (unrollUpToFactor)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," loopUnrollUpToFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp, unrollFactor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," loopUnrollByFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(forOp, unrollFactor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"unique_ptr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"OperationPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FuncOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">> "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mlir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"createLoopUnrollPass"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    int"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," unrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," unrollUpToFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," unrollFull"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    const"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"function"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AffineForOp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")> "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"getUnrollFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," std"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"::"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make_unique"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LoopUnroll"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      unrollFactor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ?"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," None "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Optional"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"unsigned"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">(unrollFactor),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      unrollUpToFactor, unrollFull, getUnrollFactor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"åŸç†"),i("p",null,[s("è¿™æ®µæ˜¯ "),i("strong",null,"MLIRï¼ˆMulti-Level IRï¼‰é‡Œçš„ LoopUnroll.cpp"),s("ï¼Œå®ƒå®ç°äº†ä¸€ä¸ª"),i("strong",null,"å¾ªç¯å±•å¼€ï¼ˆLoop Unrollingï¼‰Pass"),s("ã€‚")]),i("h3",{id:"å®ƒæ˜¯å¹²ä»€ä¹ˆçš„",tabindex:"-1"},[s("å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼š "),i("a",{class:"header-anchor",href:"#å®ƒæ˜¯å¹²ä»€ä¹ˆçš„","aria-label":'Permalink to "å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼š"'},"â€‹")]),i("ul",null,[i("li",null,[i("p",null,[s("**å¾ªç¯å±•å¼€ï¼ˆLoop Unrollingï¼‰**æ˜¯ä¸€ç§å¸¸è§ä¼˜åŒ–æ‰‹æ®µï¼Œé€šè¿‡æŠŠå¾ªç¯ä½“å¤åˆ¶å¤šä»½ï¼Œå‡å°‘å¾ªç¯æ§åˆ¶å¼€é”€ï¼ˆæ¯”å¦‚ "),i("code",null,"for"),s(" è®¡æ•°å’Œåˆ¤æ–­ï¼‰ä»¥åŠå¢åŠ æŒ‡ä»¤çº§å¹¶è¡Œæ€§ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚")])]),i("li",null,[i("p",null,"è¿™ä¸ª Pass ä¼šï¼š"),i("ul",null,[i("li",null,[s("æ‰¾å‡º "),i("strong",null,"AffineForOp"),s("ï¼ˆMLIR ä¸­çš„ affine ç‰ˆæœ¬ for å¾ªç¯ï¼‰")]),i("li",null,[s("åˆ¤æ–­æ˜¯å¦æ˜¯"),i("strong",null,"æœ€å†…å±‚å¾ªç¯")]),i("li",null,[s("æŒ‰è®¾å®šå¥½çš„ "),i("strong",null,"å±•å¼€å› å­ï¼ˆunroll factorï¼‰"),s("ï¼Œæˆ–è€…ç›´æ¥"),i("strong",null,"å®Œå…¨å±•å¼€"),s("ï¼ˆfull unrollï¼‰ï¼ŒæŠŠå¾ªç¯ä½“å¤åˆ¶å¯¹åº”æ¬¡æ•°")]),i("li",null,"æ”¯æŒç”¨æˆ·æä¾› callbackï¼ŒåŠ¨æ€å†³å®šä¸åŒå¾ªç¯çš„å±•å¼€å› å­")])])]),i("h3",{id:"å®ƒçš„ç‰¹ç‚¹",tabindex:"-1"},[s("å®ƒçš„ç‰¹ç‚¹ï¼š "),i("a",{class:"header-anchor",href:"#å®ƒçš„ç‰¹ç‚¹","aria-label":'Permalink to "å®ƒçš„ç‰¹ç‚¹ï¼š"'},"â€‹")]),i("ul",null,[i("li",null,[i("p",null,[s("ä¸“é—¨é¢å‘ "),i("strong",null,"Affine dialect"),s("ï¼Œé’ˆå¯¹ "),i("code",null,"affine.for"),s(" è¯­å¥æ“ä½œ")])]),i("li",null,[i("p",null,"å¯ä»¥è®¾å®šï¼š"),i("ul",null,[i("li",null,"å›ºå®šå±•å¼€å› å­ï¼ˆé»˜è®¤ 4ï¼‰"),i("li",null,"â€œå°½é‡å±•å¼€åˆ°å¤šå°‘å€â€"),i("li",null,"æˆ–â€œå®Œå…¨å±•å¼€â€ï¼ˆå½“å¾ªç¯æ¬¡æ•°æ˜¯å¸¸é‡ï¼Œä¸”å°äºç»™å®šé˜ˆå€¼ï¼‰")])]),i("li",null,[i("p",null,"æ”¯æŒé€’å½’å¤šè½®å±•å¼€")]),i("li",null,[i("p",null,[s("ç”¨åˆ°äº† MLIR çš„ "),i("code",null,"walk"),s(" å’Œ "),i("code",null,"post order walk"),s("ï¼ŒæŒ‰ä»å†…åˆ°å¤–çš„é¡ºåºæ”¶é›†ã€å¤„ç†å¾ªç¯ï¼Œé¿å…å±•å¼€å¤–å±‚å¯¼è‡´å†…å±‚å¾ªç¯æ¶ˆå¤±")])])]),i("h3",{id:"ğŸ“–-æ€»ç»“ä¸€å¥",tabindex:"-1"},[s("ğŸ“– æ€»ç»“ä¸€å¥ï¼š "),i("a",{class:"header-anchor",href:"#ğŸ“–-æ€»ç»“ä¸€å¥","aria-label":'Permalink to "ğŸ“– æ€»ç»“ä¸€å¥ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"LoopUnroll.cpp"),s(" å®ç°äº† MLIR ä¸­ affine å¾ªç¯çš„å±•å¼€ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡è®¾å®šå› å­ã€é˜ˆå€¼æˆ–å›è°ƒæ–¹å¼çµæ´»æ§åˆ¶å±•å¼€ç­–ç•¥ï¼Œå‡å°‘å¾ªç¯å¼€é”€ã€æé«˜å¹¶è¡Œåº¦ï¼Œæ˜¯ affine dialect ä¼˜åŒ–çš„é‡è¦ä¸­ç«¯ passã€‚")])],-1),i("h3",{id:"jumpthreading-cpp",tabindex:"-1"},[s("JumpThreading.cpp "),i("a",{class:"header-anchor",href:"#jumpthreading-cpp","aria-label":'Permalink to "JumpThreading.cpp"'},"â€‹")],-1),i("p",null,"æ˜¯ä¸€ç§ä¸­ç«¯æ§åˆ¶æµä¼˜åŒ–æŠ€æœ¯ï¼Œç®€å•è¯´å°±æ˜¯ï¼š",-1),i("p",null,"åœ¨ç¼–è¯‘æ—¶ï¼Œæ ¹æ®æ¡ä»¶åˆ†æ”¯çš„å·²çŸ¥è·¯å¾„ï¼Œæå‰å°†æŸäº›è·³è½¬ç›´æ¥è¿èµ·æ¥ï¼Œæ¶ˆé™¤ä¸å¿…è¦çš„ä¸­é—´åŸºæœ¬å—ï¼Œä¼˜åŒ– CFGï¼ˆControl Flow Graphï¼‰ï¼Œæå‡æ‰§è¡Œæ•ˆç‡ã€‚",-1),i("details",null,[i("summary",null,"æ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- JumpThreading.cpp - Thread control through conditional blocks ------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This file implements the Jump Threading pass.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"å…·ä½“åŸç†"),i("h2",{id:"ä»€ä¹ˆæ˜¯-jump-threading",tabindex:"-1"},[s("ä»€ä¹ˆæ˜¯ Jump Threadingï¼Ÿ "),i("a",{class:"header-anchor",href:"#ä»€ä¹ˆæ˜¯-jump-threading","aria-label":'Permalink to "ä»€ä¹ˆæ˜¯ Jump Threadingï¼Ÿ"'},"â€‹")]),i("p",null,[i("strong",null,"Jump Threading"),s(" æ˜¯ä¸€ç§"),i("strong",null,"æ§åˆ¶æµå›¾ï¼ˆCFGï¼‰ä¼˜åŒ–æŠ€æœ¯"),s("ï¼Œç”¨äºåœ¨ç¼–è¯‘ä¸­æ¶ˆé™¤å¤šä½™çš„ä¸­é—´åˆ†æ”¯è·³è½¬è·¯å¾„ï¼Œä¼˜åŒ–æ‰§è¡Œè·¯å¾„ï¼Œæé«˜æ€§èƒ½ã€‚")]),i("p",null,"å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š"),i("ul",null,[i("li",null,[s("å¦‚æœç¨‹åºä¸­æŸä¸ª"),i("strong",null,"æ¡ä»¶åˆ†æ”¯çš„ç»“æœå¯ä»¥æ ¹æ®å·²æœ‰çš„ä¿¡æ¯æå‰ç¡®å®š"),s("ï¼Œå°±ç›´æ¥â€œç©¿çº¿â€ï¼ˆthreadï¼‰è¿‡å»ï¼Œè·³è¿‡æ— ç”¨çš„ä¸­é—´åŸºæœ¬å—ï¼Œè¿é€šæœ€ç»ˆç›®æ ‡ã€‚")])]),i("h2",{id:"ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­",tabindex:"-1"},[s("ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­ï¼š "),i("a",{class:"header-anchor",href:"#ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­","aria-label":'Permalink to "ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­ï¼š"'},"â€‹")]),i("p",null,"å‡å¦‚ä½ æœ‰è¿™æ ·ä¸€æ®µä¼ªä»£ç ï¼š"),i("div",{class:"language-c vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"c"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (A) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (A) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    do_something"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"collapse"})]),i("p",null,"ç¼–è¯‘æˆæ§åˆ¶æµå›¾å¯èƒ½æ˜¯ï¼š"),i("div",{class:"language- vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"Block0")]),s(`
`),i("span",{class:"line"},[i("span",null,"  |")]),s(`
`),i("span",{class:"line"},[i("span",null,"  v")]),s(`
`),i("span",{class:"line"},[i("span",null," Block1 (if A)")]),s(`
`),i("span",{class:"line"},[i("span",null,"  |    |")]),s(`
`),i("span",{class:"line"},[i("span",null,"  v    v")]),s(`
`),i("span",{class:"line"},[i("span",null," B2   Block3 (if A again)")]),s(`
`),i("span",{class:"line"},[i("span",null,"         |    |")]),s(`
`),i("span",{class:"line"},[i("span",null,"         v    v")]),s(`
`),i("span",{class:"line"},[i("span",null,"      B4     B5")])])]),i("button",{class:"collapse"})]),i("p",null,"ä½ ä¼šå‘ç°ï¼š"),i("ul",null,[i("li",null,[s("å¦‚æœ "),i("code",null,"Block1"),s(" æ¡ä»¶å·²ç»åˆ¤æ–­ "),i("code",null,"A"),s("ï¼Œåˆ°äº† "),i("code",null,"Block3"),s(" å†åˆ¤æ–­ "),i("code",null,"A"),s(" æ˜¯"),i("strong",null,"å†—ä½™çš„"),s("ã€‚")]),i("li",null,[i("strong",null,"Jump Threading"),s(" å°±ä¼šâ€œç©¿çº¿â€è¿‡å»ï¼ŒæŠŠ "),i("code",null,"Block1"),s(" ä¸­åˆ¤æ–­ "),i("code",null,"A"),s(" ä¸º true çš„è·³è½¬ç›´æ¥è¿åˆ° "),i("code",null,"do_something()"),s("ï¼Œæ¶ˆé™¤æ‰ "),i("code",null,"Block3"),s("ã€‚")])]),i("h2",{id:"å®ƒæ˜¯æ€ä¹ˆåšçš„",tabindex:"-1"},[s("å®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ "),i("a",{class:"header-anchor",href:"#å®ƒæ˜¯æ€ä¹ˆåšçš„","aria-label":'Permalink to "å®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"'},"â€‹")]),i("p",null,"Jump Threading çš„å¸¸è§æ­¥éª¤ï¼š"),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"åˆ†ææ¡ä»¶åˆ†æ”¯çš„å€¼ä¼ æ’­")]),i("ul",null,[i("li",null,"çœ‹çœ‹èƒ½ä¸èƒ½æ ¹æ®å·²æœ‰è·¯å¾„ä¸Šçš„æ¡ä»¶ï¼Œæ¨æ–­æŸä¸ªåˆ†æ”¯æ¡ä»¶çš„å€¼ã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"ç¡®å®šå†—ä½™è·³è½¬")]),i("ul",null,[i("li",null,"æ‰¾åˆ°é‚£äº›æ¡ä»¶åˆ¤æ–­å¯ä»¥æå‰ç¡®å®šçš„è·¯å¾„ã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"ä¿®æ”¹æ§åˆ¶æµå›¾")]),i("ul",null,[i("li",null,"é‡å®šå‘è·³è½¬ï¼Œæ¶ˆé™¤ä¸­é—´å—ï¼Œæˆ–è€…ç›´æ¥åˆå¹¶åŸºæœ¬å—ï¼Œç®€åŒ– CFGã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"æ›´æ–° PHI èŠ‚ç‚¹")]),i("ul",null,[i("li",null,"ç”±äºè·¯å¾„å˜åŒ–ï¼ŒPHI èŠ‚ç‚¹å¯èƒ½è¦é‡æ–°è°ƒæ•´ã€‚")])])]),i("h2",{id:"ä¸¾ä¸ª-llvm-ä¸­çš„å…¸å‹åº”ç”¨",tabindex:"-1"},[s("ä¸¾ä¸ª LLVM ä¸­çš„å…¸å‹åº”ç”¨ï¼š "),i("a",{class:"header-anchor",href:"#ä¸¾ä¸ª-llvm-ä¸­çš„å…¸å‹åº”ç”¨","aria-label":'Permalink to "ä¸¾ä¸ª LLVM ä¸­çš„å…¸å‹åº”ç”¨ï¼š"'},"â€‹")]),i("p",null,"æ¯”å¦‚ LLVM IR ä¸­ï¼š"),i("div",{class:"language-llvm vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"llvm"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"%cmp = icmp eq i32 %a, 0")]),s(`
`),i("span",{class:"line"},[i("span",null,"br i1 %cmp, label %if.then, label %if.else")]),s(`
`),i("span",{class:"line"},[i("span")]),s(`
`),i("span",{class:"line"},[i("span",null,"if.then:")]),s(`
`),i("span",{class:"line"},[i("span",null,"  %cmp2 = icmp eq i32 %a, 0")]),s(`
`),i("span",{class:"line"},[i("span",null,"  br i1 %cmp2, label %foo, label %bar")])])]),i("button",{class:"collapse"})]),i("p",null,[s("è¿™é‡Œ "),i("code",null,"%cmp2"),s(" åˆ¤æ–­çš„å’Œ "),i("code",null,"%cmp"),s(" å®Œå…¨ä¸€æ ·ã€‚ "),i("strong",null,"Jump Threading"),s(" ä¼šæŠŠ "),i("code",null,"if.then"),s(" ä¸­å¯¹ "),i("code",null,"%cmp2"),s(" çš„åˆ¤æ–­æå‰ç¡®å®šæˆ trueï¼Œç›´æ¥è·³åˆ° "),i("code",null,"%foo"),s("ã€‚")]),i("h2",{id:"ä¼˜åŒ–æ•ˆæœ",tabindex:"-1"},[s("ä¼˜åŒ–æ•ˆæœï¼š "),i("a",{class:"header-anchor",href:"#ä¼˜åŒ–æ•ˆæœ","aria-label":'Permalink to "ä¼˜åŒ–æ•ˆæœï¼š"'},"â€‹")]),i("ul",null,[i("li",null,"å‡å°‘åŸºæœ¬å—æ•°é‡"),i("li",null,"ç¼©çŸ­åˆ†æ”¯é¢„æµ‹è·¯å¾„"),i("li",null,"æé«˜åˆ†æ”¯å‘½ä¸­ç‡"),i("li",null,"ç®€åŒ–æ§åˆ¶æµï¼Œåˆ©å¥½åç»­åƒ LICMã€ADCEã€DCEã€GVN ç­‰ä¼˜åŒ–")]),i("h2",{id:"æ€»ç»“ä¸€å¥-1",tabindex:"-1"},[s("æ€»ç»“ä¸€å¥ï¼š "),i("a",{class:"header-anchor",href:"#æ€»ç»“ä¸€å¥-1","aria-label":'Permalink to "æ€»ç»“ä¸€å¥ï¼š"'},"â€‹")]),i("blockquote",null,[i("p",null,[i("strong",null,"Jump Threading = åˆ©ç”¨å·²çŸ¥æ¡ä»¶ï¼Œæå‰ç¡®å®šè·³è½¬è·¯å¾„ï¼Œç©¿çº¿ä¼˜åŒ–æ§åˆ¶æµ")])])],-1),i("h3",{id:"slpvectorizer-cpp",tabindex:"-1"},[s("SLPVectorizer.cpp "),i("a",{class:"header-anchor",href:"#slpvectorizer-cpp","aria-label":'Permalink to "SLPVectorizer.cpp"'},"â€‹")],-1),i("p",null,"è¿™æ˜¯ LLVM ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„çŸ¢é‡åŒ– passï¼Œå« SLP Vectorizerã€‚",-1),i("p",null,"SLPï¼ˆSuperword Level Parallelismï¼‰ æ˜¯ä¸€ç§åœ¨å•ä¸ªåŸºæœ¬å—å†…ï¼Œæ£€æµ‹å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ç‹¬ç«‹æ“ä½œï¼Œç„¶åå°†å®ƒä»¬ç»„åˆæˆ SIMD å‘é‡æ“ä½œçš„æŠ€æœ¯ã€‚",-1),i("p",null,"ä¸ Loop Vectorizer ä¸“é—¨ä¼˜åŒ–å¾ªç¯ä¸åŒï¼ŒSLP Vectorizer ä¸»è¦åœ¨åŸºæœ¬å—èŒƒå›´å†…ï¼ˆBB-levelï¼‰åšå‘é‡åŒ–ï¼Œå¯¹ä¾‹å¦‚è¿ç»­ storeã€loadã€åŠ æ³•ã€ä¹˜æ³•ç­‰è¯­å¥ï¼Œæ‰¾å‡ºå®ƒä»¬çš„æ•°æ®ä¾èµ–å…³ç³»ï¼Œç»„å»ºæˆæ ‘ï¼Œæœ€ç»ˆæŠŠè¿™äº›æ“ä½œå˜æˆå•æ¡ SIMD æŒ‡ä»¤æ‰§è¡Œã€‚",-1),i("details",null,[i("summary",null,"æ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- SLPVectorizer.cpp - A bottom up SLP Vectorizer ---------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This pass implements the Bottom Up SLP vectorizer. It detects consecutive")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// stores that can be put together into vector-stores. Next, it attempts to")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// construct vectorizable tree using the use-def chains. If a profitable tree")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// was found, the SLP vectorizer performs vectorization on the tree.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// The pass is inspired by the work described in the paper:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'//  "Loop-Aware SLP in GCC" by Ira Rosen, Dorit Nuzman, Ayal Zaks.')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// è¿™ä¸ª pass å®ç°äº†**è‡ªåº•å‘ä¸Šï¼ˆBottom Upï¼‰çš„ SLPï¼ˆSuperword Level Parallelismï¼‰çŸ¢é‡åŒ–å™¨**ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å®ƒä¼šæ£€æµ‹å¯ä»¥ç»„åˆæˆå‘é‡åŒ–å­˜å‚¨æ“ä½œï¼ˆvector-storeï¼‰çš„è¿ç»­ store æŒ‡ä»¤ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// æ¥ç€ï¼Œå®ƒå°è¯•åŸºäº use-def é“¾ï¼ˆä½¿ç”¨-å®šä¹‰å…³ç³»ï¼‰æ„å»ºä¸€æ£µå¯å‘é‡åŒ–çš„è¿ç®—æ ‘ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å¦‚æœå‘ç°ä¸€æ£µå…·æœ‰ä¼˜åŒ–ä»·å€¼çš„è¿ç®—æ ‘ï¼ŒSLP Vectorizer å°±ä¼šå¯¹å…¶è¿›è¡ŒçŸ¢é‡åŒ–è½¬æ¢ã€‚")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"åšæ³•"),i("h3",{id:"å®ƒæ€ä¹ˆåš",tabindex:"-1"},[s("å®ƒæ€ä¹ˆåšï¼Ÿ "),i("a",{class:"header-anchor",href:"#å®ƒæ€ä¹ˆåš","aria-label":'Permalink to "å®ƒæ€ä¹ˆåšï¼Ÿ"'},"â€‹")]),i("p",null,"å¤§è‡´æµç¨‹ï¼š"),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"æ£€æµ‹è¿ç»­ store / load")]),i("ul",null,[i("li",null,"æ‰¾å‡ºå†…å­˜åœ°å€è¿ç»­ã€ç±»å‹ç›¸åŒçš„æ“ä½œã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"é€šè¿‡ use-def é“¾æ„å»ºå‘é‡åŒ–æ ‘")]),i("ul",null,[i("li",null,"é¡ºç€å˜é‡çš„ä½¿ç”¨-å®šä¹‰å…³ç³»ï¼Œå‘ä¸Šé€’å½’æ„å»ºä¸€æ£µè¿ç®—æ ‘ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ“ä½œå¯ä»¥ä¸€èµ·å‘é‡åŒ–ã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"è®¡ç®—æ”¶ç›Šï¼ˆCost Modelï¼‰")]),i("ul",null,[i("li",null,"åˆ¤æ–­å‘é‡åŒ–åæ˜¯å¦æ€§èƒ½æ›´ä¼˜ã€‚")])]),i("li",null,[i("p",null,[i("strong",null,"å¦‚æœæ”¶ç›Šå¯è§‚ï¼Œå°±æ‰§è¡ŒçŸ¢é‡åŒ–")]),i("ul",null,[i("li",null,"å°†å¤šä¸ªæ ‡é‡æ“ä½œç»„åˆæˆä¸€æ¡æˆ–å¤šæ¡ SIMD æŒ‡ä»¤ã€‚")])])]),i("h3",{id:"ä¸¾ä¸ªä¾‹å­-1",tabindex:"-1"},[s("ä¸¾ä¸ªä¾‹å­ "),i("a",{class:"header-anchor",href:"#ä¸¾ä¸ªä¾‹å­-1","aria-label":'Permalink to "ä¸¾ä¸ªä¾‹å­"'},"â€‹")]),i("p",null,"æ¯”å¦‚ï¼š"),i("div",{class:"language-c vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"c"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"a"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," b"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," c"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"a"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," b"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," c"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"a"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," b"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," c"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"a"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," b"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," c"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")])])]),i("button",{class:"collapse"})]),i("p",null,[s("åŸæœ¬ 4 æ¬¡åŠ æ³• + 4 æ¬¡ storeã€‚ SLP Vectorizer èƒ½æŠŠ 4 æ¬¡åŠ æ³•æ‹¼æˆä¸€æ¡ "),i("code",null,"vector_add"),s("ï¼Œ4 æ¬¡ store åˆå¹¶æˆ "),i("code",null,"vector_store"),s("ã€‚")])],-1),i("h3",{id:"globaldce-cpp",tabindex:"-1"},[s("GlobalDCE.cpp "),i("a",{class:"header-anchor",href:"#globaldce-cpp","aria-label":'Permalink to "GlobalDCE.cpp"'},"â€‹")],-1),i("p",null,[s("è¿™æ˜¯ LLVM ä¸­çš„ "),i("strong",null,"å…¨å±€æ­»ä»£ç åˆ é™¤ï¼ˆGlobal Dead Code Elimination, GlobalDCEï¼‰"),s(" passï¼Œ å®ƒä¼šåˆ é™¤é‚£äº›ï¼š")],-1),i("ul",null,[i("li",null,[i("strong",null,"ä½œç”¨åŸŸä¸º internalï¼ˆä¾‹å¦‚ static æˆ–æœªå¯¼å‡ºç¬¦å·ï¼‰")]),i("li",null,[i("strong",null,"ä¸”ä¸å¯è¾¾"),s("ï¼ˆæ²¡æœ‰è¢«ä»»ä½•å…¶ä»–å¯è¾¾ä»£ç ä½¿ç”¨åˆ°ï¼‰çš„å…¨å±€å˜é‡ã€å…¨å±€å‡½æ•°ã€å¸¸é‡ç­‰ã€‚")])],-1),i("p",null,"å®ƒçš„ä½œç”¨å°±æ˜¯æ¸…ç†ç¨‹åºä¸­å®Œå…¨æ— ç”¨çš„å…¨å±€å®šä¹‰ï¼Œå‡å°‘æœ€ç»ˆç¨‹åºä½“ç§¯ï¼Œæé«˜æ•ˆç‡ã€‚",-1),i("details",null,[i("summary",null,"æ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===-- GlobalDCE.cpp - DCE unreachable internal functions ----------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This transform is designed to eliminate unreachable internal globals from the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// program.  It uses an aggressive algorithm, searching out globals that are")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// known to be alive.  After it finds all of the globals which are needed, it")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// deletes whatever is left over.  This allows it to delete recursive chunks of")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// the program which are unreachable.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})]),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===-- GlobalDCE.cpp - åˆ é™¤ä¸å¯è¾¾çš„å†…éƒ¨å…¨å±€å¯¹è±¡ ----------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// æœ¬æ–‡ä»¶å±äº LLVM é¡¹ç›®ï¼Œéµå¾ª Apache License v2.0 å’Œ LLVM ç‰¹åˆ«æ¡æ¬¾ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// è®¸å¯è¯ä¿¡æ¯è§ï¼šhttps://llvm.org/LICENSE.txt")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// è¿™ä¸ªä¼˜åŒ–å˜æ¢ï¼ˆtransformï¼‰ç”¨äº**åˆ é™¤ç¨‹åºä¸­ä¸å¯è¾¾çš„å†…éƒ¨å…¨å±€å¯¹è±¡ï¼ˆinternal globalsï¼‰**ã€‚  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å®ƒé‡‡ç”¨ä¸€ç§æ¿€è¿›çš„ç­–ç•¥ï¼šé¦–å…ˆæ‰¾å‡ºæ‰€æœ‰â€œå·²çŸ¥å­˜æ´»ï¼ˆaliveï¼‰â€çš„å…¨å±€å¯¹è±¡ï¼Œ  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// ç„¶ååˆ é™¤æ‰€æœ‰å‰©ä½™çš„æœªè¢«å¼•ç”¨ã€ä¸å¯è¾¾çš„å…¨å±€å¯¹è±¡ã€‚  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// è¿™ç§æ–¹æ³•ç”šè‡³å¯ä»¥åˆ é™¤é‚£äº›ç›¸äº’é€’å½’ä½†æ•´ä½“ä¸å¯è¾¾çš„ç¨‹åºç‰‡æ®µã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"æµç¨‹"),s(" å¯¹æ¯ä¸ªå·²çŸ¥å­˜æ´»çš„å…¨å±€å¯¹è±¡ï¼Œæ£€æŸ¥å®ƒå¼•ç”¨çš„å…¶ä»–å…¨å±€ç¬¦å·ï¼Œ å¦‚æœå‘ç°æ–°å¼•ç”¨çš„å†…éƒ¨å…¨å±€å¯¹è±¡ï¼Œä¹Ÿæ ‡è®°ä¸ºå­˜æ´»ï¼Œç»§ç»­é€’å½’éå†ã€‚ ")],-1),i("h3",{id:"inliner-cpp",tabindex:"-1"},[s("Inliner.cpp "),i("a",{class:"header-anchor",href:"#inliner-cpp","aria-label":'Permalink to "Inliner.cpp"'},"â€‹")],-1),i("p",null,"æŠŠä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨ç‚¹ï¼Œæ›¿æ¢æˆè¯¥å‡½æ•°çš„å‡½æ•°ä½“ä»£ç ï¼Œä»è€Œæ¶ˆé™¤å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œå¢åŠ åç»­ä¼˜åŒ–ç©ºé—´ã€‚",-1),i("details",null,[i("summary",null,"æ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- Inliner.cpp - Pass to inline function calls ------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// This file implements a basic inlining algorithm that operates bottom up over")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// the Strongly Connect Components(SCCs) of the CallGraph. This enables a more")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// incremental propagation of inlining decisions from the leafs to the roots of")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// the callgraph.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"åšæ³•"),i("ul",null,[i("li",null,[i("p",null,[i("strong",null,"è‡ªåº•å‘ä¸Šéå†è°ƒç”¨å›¾çš„ SCC"),s("ï¼š")]),i("ul",null,[i("li",null,"å…ˆå¤„ç†è°ƒç”¨å›¾ä¸­æ²¡æœ‰è°ƒç”¨å…¶ä»–å‡½æ•°çš„å¶å­å‡½æ•°"),i("li",null,"å†é€æ¸å‘ä¸Šä¼ æ’­å†…è”å†³ç­–"),i("li",null,"å¼ºè¿é€šåˆ†é‡ï¼ˆSCCï¼‰æŒ‡çš„æ˜¯è°ƒç”¨å›¾ä¸­ç›¸äº’é€’å½’è°ƒç”¨çš„å‡½æ•°é›†åˆï¼ŒSCC å†…è”é¡ºåºå¾ˆé‡è¦ï¼Œé¿å…é€’å½’æ­»å¾ªç¯")])]),i("li",null,[i("p",null,[i("strong",null,"å¢é‡å¼ä¼ æ’­ä¼˜åŒ–æ•ˆæœ"),s(" å†…è”åçš„å‡½æ•°å¯èƒ½å˜å¾—â€œå†…è”å‹å¥½â€ï¼Œä¾¿äºç»§ç»­å‘ä¸Šå†…è”")])])])],-1),i("h3",{id:"sroa-cpp",tabindex:"-1"},[s("SROA.cpp "),i("a",{class:"header-anchor",href:"#sroa-cpp","aria-label":'Permalink to "SROA.cpp"'},"â€‹")],-1),i("p",null,"SROA æ˜¯ LLVM ä¸­ä¸€ç§æŠŠç»“æ„ä½“/æ•°ç»„å†…å­˜åˆ†é…æ‹†æˆå¯„å­˜å™¨å˜é‡çš„ä¼˜åŒ– passï¼Œé€šè¿‡æå‡å±€éƒ¨å˜é‡ï¼Œå‡å°‘å†…å­˜è®¿é—®ï¼Œä¼˜åŒ–æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºåç»­ SSA å½¢å¼çš„ä¼˜åŒ–ã€‚",-1),i("details",null,[i("summary",null,"æ³¨é‡Š"),i("div",{class:"language-cpp vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- SROA.cpp - èšåˆç±»å‹æ ‡é‡æ›¿æ¢ï¼ˆScalar Replacement Of Aggregatesï¼‰---===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// æœ¬æ–‡ä»¶å®ç°äº†è‘—åçš„èšåˆç±»å‹æ ‡é‡æ›¿æ¢ï¼ˆSROAï¼‰ä¼˜åŒ–ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å®ƒå°è¯•è¯†åˆ«ä¸€ä¸ª aggregate allocaï¼ˆèšåˆç±»å‹å†…å­˜åˆ†é…ï¼‰ä¸­å¯ä»¥è¢«æå‡ï¼ˆpromoteï¼‰åˆ°å¯„å­˜å™¨çš„å…ƒç´ ï¼Œ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å¹¶å°†å®ƒä»¬æ›¿æ¢ä¸ºå¯„å­˜å™¨ä¸­çš„æ ‡é‡å˜é‡ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// å¦‚æœåˆé€‚ï¼Œå®ƒè¿˜ä¼šå°è¯•å°†æŸäº›å…ƒç´ æˆ–å…ƒç´ é›†åˆï¼Œè½¬æ¢æˆå‘é‡æˆ–ä½åŸŸé£æ ¼çš„æ•´æ•°æ ‡é‡ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// è¿™ä¸ª pass å°½é‡é¿å…å¯¹ alloca å†…å­˜åŒºåŸŸåšæ— æ„ä¹‰çš„æ‹†åˆ†ï¼Œ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// ä¿æŒé‚£äº›ä»…ä»…åœ¨å†…å­˜å’Œå¤–éƒ¨åœ°å€é—´è½¬ç§»çš„å†…å­˜å—ä¸è¢«æ‹†è§£æˆæ ‡é‡ä»£ç ã€‚")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// ç”±äºè¿™ä¸ª pass åŒæ—¶ä¹Ÿæ‰§è¡Œ alloca æå‡ï¼ˆpromoteï¼‰ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¸®åŠ©å®Œæˆ")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===- SROA.cpp - Scalar Replacement Of Aggregates ------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// See https://llvm.org/LICENSE.txt for license information.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\\file")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// This transformation implements the well known scalar replacement of")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// aggregates transformation. It tries to identify promotable elements of an")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// aggregate alloca, and promote them to registers. It will also try to")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// convert uses of an element (or set of elements) of an alloca into a vector")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// or bitfield-style integer scalar if appropriate.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"///")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// It works to do this with minimal slicing of the alloca so that regions")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// which are merely transferred in and out of external memory remain unchanged")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// and are not decomposed to scalar code.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"///")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// Because this also performs alloca promotion, it can be thought of as also")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// serving the purpose of SSA formation. The algorithm iterates on the")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/// function until all opportunities for promotion have been realized.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"///")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//===----------------------------------------------------------------------===//")])])]),i("button",{class:"collapse"})])],-1),i("details",null,[i("summary",null,"ä½œç”¨"),i("h2",{id:"å®ƒçš„ä½œç”¨",tabindex:"-1"},[s("å®ƒçš„ä½œç”¨ï¼š "),i("a",{class:"header-anchor",href:"#å®ƒçš„ä½œç”¨","aria-label":'Permalink to "å®ƒçš„ä½œç”¨ï¼š"'},"â€‹")]),i("ul",null,[i("li",null,[s("æŠŠ "),i("code",null,"alloca"),s(" å‡ºæ¥çš„èšåˆç±»å‹ï¼ˆå¦‚ "),i("code",null,"struct"),s("ã€"),i("code",null,"æ•°ç»„"),s("ï¼‰å†…å­˜åˆ†é…ä¸­çš„ç‹¬ç«‹å…ƒç´ ï¼Œ"),i("strong",null,"æ‹†åˆ†æˆå•ä¸ªæ ‡é‡å˜é‡"),s("ï¼Œæå‡åˆ°å¯„å­˜å™¨ï¼Œå‡å°‘å†…å­˜è®¿é—®å¼€é”€")]),i("li",null,"æœ‰æ—¶è¿˜ä¼šå°†ä¸€ç»„å…ƒç´ æ‰“åŒ…æˆå‘é‡ï¼ˆvectorï¼‰æˆ–æ•´å‹ä½åŸŸ"),i("li",null,"é¿å…æ‹†è§£é‚£äº›åªæ˜¯ç®€å•æ¬è¿è¿›å‡ºå†…å­˜çš„å†…å­˜å—ï¼Œä¿æŒå†…å­˜æ“ä½œç®€å•é«˜æ•ˆ"),i("li",null,"ä¼šå¤šè½®è¿­ä»£ï¼Œç›´åˆ°æ‰€æœ‰èƒ½æå‡çš„å…ƒç´ éƒ½å®Œæˆæ›¿æ¢"),i("li",null,[s("ä¹Ÿè¢«è§†ä¸º"),i("strong",null,"è¾…åŠ©æ„å»º SSA å½¢å¼"),s("çš„é‡è¦æ­¥éª¤")])]),i("h2",{id:"æ€»ç»“ä¸€å¥-2",tabindex:"-1"},[s("æ€»ç»“ä¸€å¥ï¼š "),i("a",{class:"header-anchor",href:"#æ€»ç»“ä¸€å¥-2","aria-label":'Permalink to "æ€»ç»“ä¸€å¥ï¼š"'},"â€‹")]),i("p",null,[i("strong",null,"SROA æ˜¯ LLVM ä¸­ä¸€ç§æŠŠç»“æ„ä½“/æ•°ç»„å†…å­˜åˆ†é…æ‹†æˆå¯„å­˜å™¨å˜é‡çš„ä¼˜åŒ– pass"),s("ï¼Œé€šè¿‡æå‡å±€éƒ¨å˜é‡ï¼Œå‡å°‘å†…å­˜è®¿é—®ï¼Œä¼˜åŒ–æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºåç»­ SSA å½¢å¼çš„ä¼˜åŒ–ã€‚")])],-1)])]),"main-header":l(()=>[n(a.$slots,"main-header")]),"main-header-after":l(()=>[n(a.$slots,"main-header-after")]),"main-nav":l(()=>[n(a.$slots,"main-nav")]),"main-content-before":l(()=>[n(a.$slots,"main-content-before")]),"main-content":l(()=>[n(a.$slots,"main-content")]),"main-content-after":l(()=>[n(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[n(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[n(a.$slots,"main-nav-after")]),comment:l(()=>[n(a.$slots,"comment")]),footer:l(()=>[n(a.$slots,"footer")]),aside:l(()=>[n(a.$slots,"aside")]),"aside-custom":l(()=>[n(a.$slots,"aside-custom")]),default:l(()=>[n(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{O as default,D as usePageData};
